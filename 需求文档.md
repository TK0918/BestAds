# 项目名称：BestAds海外媒体广告管理系统

## 1. 项目概述

### 1.1 项目背景
本项目旨在实现海外媒体平台（Facebook、Google等）的广告账户开户、充值功能、广告管理功能。公司作为二级代理，无法直接对接海外媒体平台，需要通过一级代理提供的接口，完成开户和充值的线上化功能。

### 1.2 项目目标
- 构建完整的海外广告投放管理生态
- 实现广告账户开户、充值的自动化流程
- 提供完善的广告管理功能
- 建立高效的运营管理体系

### 1.3 目标用户
- **主要用户**：需要投放海外广告的企业客户
- **运营用户**：公司内部运营管理人员
- **管理用户**：系统管理员和业务负责人

## 2. 功能需求

### 2.1 核心功能
#### BestAds客户端系统：
- 账户管理
- Facebook广告管理
- Facebook记录管理

#### 运营管理系统：
- 客户管理
- FB业务管理（账户管理、开户管理、账户分配、账户充值）

### 2.2 功能详细描述

#### 2.2.1 BestAds客户端系统

##### 2.2.1.1 账户管理
**业务流程**：
1. 客户登录系统查看可用账户
2. 发起开户申请或充值申请
3. 跟踪申请状态

**功能说明**：
- 展示客户可使用的广告账户基础信息
- 数据来源于运营端的账户分配功能
- 支持发起开户和充值申请

**页面描述**：
- 账户列表页面：显示账户ID、平台、状态、余额等信息
- 开户申请页面：填写开户相关信息
- 充值申请页面：选择账户和充值金额

**字段明细**：
- 账户ID、账户名称、所属平台、账户状态
- 账户余额、币种、创建时间、最后更新时间
- 开户申请：投放URL、账户时区、page页面（部分客户开户需要）
- 充值申请：广告账户、充值金额

**操作交互**：
- 账户筛选和搜索
- 一键发起开户申请
- 一键发起充值申请
- 实时状态更新

##### 2.2.1.2 Facebook广告管理
**业务流程**：
1. 授权Facebook个人号
2. 获取广告账户数据
3. 管理Campaign、Adset、Ad

**功能说明**：
- 展示授权Facebook个人号获取的广告账户
- 按广告账户、Campaign、Adset、Ad四个层级分Tab展示
- 提供基础的广告管理功能

**页面描述**：
- 广告账户Tab：显示所有可用的广告账户
- Campaign Tab：显示所选账户下的广告系列
- Adset Tab：显示所选Campaign下的广告组
- Ad Tab：显示所选Adset下的具体广告

**字段明细**：
- 广告账户：账户ID、账户名、状态、余额、时区
- Campaign：Campaign ID、名称、状态、预算、目标、消耗、展示、点击、转化、CPC、CPM、单次转化成本
- Adset：Adset ID、名称、状态、预算、消耗、展示、点击、转化、CPC、CPM、单次转化成本
- Ad：Ad ID、名称、状态、消耗、展示、点击、转化、CPC、CPM、单次转化成本

**操作交互**：
- 层级导航和面包屑
- 数据筛选和排序
- 基础编辑功能
- 数据导出功能

##### 2.2.1.3 Facebook记录管理
**业务流程**：
1. 系统记录客户操作
2. 状态实时跟踪更新
3. 查看历史记录

**功能说明**：
- 记录客户Facebook开户和充值的操作记录
- 实时跟进状态变化
- 分开户记录和充值记录两个Tab展示

**页面描述**：
- 开户记录Tab：显示所有开户申请记录
- 充值记录Tab：显示所有充值申请记录

**字段明细**：
开户记录：申请时间、申请状态、处理时间、开户账户ID
充值记录：申请时间、充值金额、充值状态、处理时间

**操作交互**：
- 记录搜索和筛选
- 状态实时更新
- 详情查看
- 催办功能

#### 2.2.2 运营管理系统

##### 2.2.2.1 客户管理
**业务流程**：
1. 添加新客户信息
2. 编辑现有客户信息
3. 管理客户权限

**功能说明**：
- 完整的客户生命周期管理
- 客户信息维护和权限控制

**页面描述**：
- 客户列表页：显示所有客户基本信息
- 客户详情页：完整的客户信息展示和编辑
- 新增客户页：客户导入，获取其他平台的客户信息进行导入。其他平台会提供客户的客户名称和登录邮箱信息

**字段明细**：
- 客户基本信息：公司名称、邮箱
- 业务信息：行业类型、业务规模、月预算、合作开始时间
- 账户信息：客户钱包信息。钱包信息来源公司其他中台产品的接口。钱包有在途金额、真实金额、信用额度、已用额度、冻结金额、可用余额这些内容。

**操作交互**：
- 批量导入客户
- 客户信息快速编辑
- 客户状态管理
- 客户标签管理

##### 2.2.2.2 FB业务管理

###### 2.2.2.2.1 账户管理
**业务流程**：
1. 从多个一级代理同步广告账户基础信息
2. 标记账户所属代理
3. 账户状态监控

**功能说明**：
- 统一管理从各一级代理同步的广告账户
- 维护账户与代理的关联关系

**页面描述**：
- 账户列表页：显示所有广告账户信息
- 同步管理页：配置和执行同步任务
- 代理管理页：管理一级代理信息

**字段明细**：
- 账户信息：账户ID、账户名、平台类型、创建时间、状态
- 代理信息：代理名称、代理类型、API配置、同步状态
- 同步记录：同步时间、同步数量、同步状态、错误信息

**操作交互**：
- 手动/自动同步账户
- 批量标记代理
- 账户状态监控
- 数据统计分析

###### 2.2.2.2.2 开户管理
**业务流程**：
1. 接收客户发起的开户申请
2. 选择合适的一级代理
3. 提交开户请求
4. 跟踪开户进度

**功能说明**：
- 统一处理客户开户需求
- 智能匹配最优一级代理
- 全程跟踪开户状态

**页面描述**：
- 开户申请列表：显示所有开户申请
- 申请详情页：查看和处理具体申请
- 代理选择页：为申请选择合适代理

**字段明细**：
- 申请信息：申请ID、客户名称、申请时间、业务类型
- 处理信息：处理状态、选定代理、预计完成时间
- 结果信息：开户结果、账户ID、失败原因

**操作交互**：
- 申请审核和批量处理
- 智能代理推荐
- 进度实时跟踪
- 异常处理

###### 2.2.2.2.3 账户分配
**业务流程**：
1. 从一级代理同步回来的广告账户
2. 指派给对应客户
3. 确保一对一关系

**功能说明**：
- 将开户成功的广告账户分配给客户
- 维护账户与客户的唯一绑定关系

**页面描述**：
- 待分配账户列表：显示未分配的广告账户
- 分配操作页：执行账户分配操作
- 已分配账户管理：查看和管理已分配账户

**字段明细**：
- 账户信息：账户ID、平台、创建时间、来源代理
- 分配信息：分配客户、分配时间、分配人员
- 状态信息：分配状态、使用状态、最后活跃时间

**操作交互**：
- 批量分配账户
- 账户重新分配
- 分配历史查询
- 客户账户统计

###### 2.2.2.2.4 账户充值
**业务流程**：
1. 接收客户充值需求
2. 调用一级代理充值接口
3. 确认充值结果
4. 更新账户余额

**功能说明**：
- 自动化处理客户充值需求
- 对接一级代理充值接口
- 实时跟踪充值状态

**页面描述**：
- 充值申请列表：显示所有充值申请
- 充值处理页：处理具体充值申请
- 充值记录查询：查看充值历史

**字段明细**：
- 申请信息：申请ID、客户、账户、充值金额、申请时间
- 处理信息：处理状态、选用代理、处理时间
- 结果信息：充值结果、手续费、到账金额、完成时间

**操作交互**：
- 批量充值处理
- 充值状态监控
- 失败重试机制
- 财务对账功能

### 2.3 用户流程

#### 客户端用户流程：
1. 客户注册/登录BestAds系统
2. 查看已分配的广告账户
3. 发起开户申请（如需要新账户）
4. 管理Facebook广告活动
5. 发起充值申请
6. 查看操作记录和状态

#### 运营端用户流程：
1. 运营人员登录运营系统
2. 管理客户信息
3. 同步一级代理账户数据
4. 处理客户开户申请
5. 分配账户给客户
6. 处理客户充值申请
7. 监控系统运行状态

## 3. 非功能需求

### 3.1 性能要求
- 系统响应时间：页面加载时间不超过3秒
- 并发用户数：支持1000+并发用户
- API响应时间：接口响应时间不超过1秒
- 数据同步：一级代理数据同步延迟不超过5分钟

### 3.2 安全要求
- 用户身份验证：支持多因子认证
- 数据传输：全程HTTPS加密
- 数据存储：敏感数据加密存储
- 访问控制：基于角色的权限管理
- 审计日志：完整的操作日志记录

### 3.3 可用性要求
- 系统可用性：99.5%以上
- 容错处理：优雅的错误处理和用户提示
- 界面友好：直观易用的用户界面
- 多语言支持：中英文双语界面
- 响应式设计：支持多终端访问

## 4. 技术规格

### 4.1 技术栈
- **前端**：React + TypeScript + Ant Design
- **后端**：Node.js + Express + TypeScript
- **数据库**：MySQL 8.0 + Redis
- **消息队列**：RabbitMQ
- **容器化**：Docker + Docker Compose
- **监控**：Prometheus + Grafana

### 4.2 系统架构
- **微服务架构**：用户服务、账户服务、广告服务、支付服务
- **API网关**：统一的接口管理和鉴权
- **负载均衡**：Nginx反向代理
- **缓存策略**：Redis缓存热点数据
- **数据库设计**：主从复制 + 读写分离

### 4.3 第三方集成
- **Facebook Graph API**：广告数据获取和管理
- **Google Ads API**：Google广告平台集成
- **一级代理API**：多个一级代理的开户和充值接口
- **支付网关**：支付宝、微信支付等
- **短信服务**：阿里云短信服务
- **邮件服务**：SendGrid邮件服务

## 5. 交付物

### 5.1 里程碑
- **阶段一**（4周）：系统架构设计和基础框架搭建
- **阶段二**（6周）：运营管理系统核心功能开发
- **阶段三**（6周）：BestAds客户端系统开发
- **阶段四**（4周）：第三方集成和接口对接
- **阶段五**（3周）：系统测试和性能优化
- **阶段六**（2周）：部署上线和培训支持

### 5.2 时间线
- **项目启动**：第1周
- **需求确认**：第1-2周
- **系统设计**：第2-4周
- **开发阶段**：第4-18周
- **测试阶段**：第18-21周
- **上线部署**：第22-23周
- **项目验收**：第24周

### 5.3 验收标准
- **功能完整性**：所有需求功能100%实现
- **性能指标**：满足所有性能要求
- **安全标准**：通过安全测试和渗透测试
- **用户体验**：用户满意度达到90%以上
- **系统稳定性**：连续运行30天无重大故障
- **文档完整**：提供完整的技术文档和用户手册 