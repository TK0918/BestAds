<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>账户管理 - BestAds</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .table-hover tbody tr:hover {
      background-color: #f9fafb;
    }

    .modal-backdrop {
      backdrop-filter: blur(8px);
    }

    .animate-fadeIn {
      animation: fadeIn 0.3s ease-out;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    .btn-loading {
      position: relative;
    }

    .btn-loading::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      margin-left: -10px;
      margin-top: -10px;
      width: 20px;
      height: 20px;
      border: 2px solid transparent;
      border-top: 2px solid currentColor;
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    .sidebar-item {
      position: relative;
      transition: all 0.2s ease;
    }

    .sidebar-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: #667eea;
      transform: scaleY(0);
      transition: transform 0.2s ease;
    }

    .sidebar-item.active::before,
    .sidebar-item:hover::before {
      transform: scaleY(1);
    }
  </style>
</head>
<body class="bg-gray-50 min-h-screen">
  <!-- 顶部导航栏 -->
  <header class="bg-white border-b border-gray-200 fixed w-full top-0 z-40">
    <div class="px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <!-- Logo区域 -->
        <div class="flex items-center">
          <div class="flex-shrink-0 flex items-center">
            <div class="w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
              <i class="fas fa-chart-line text-white text-sm"></i>
            </div>
            <span class="ml-3 text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
              BestAds
            </span>
          </div>
        </div>

        <!-- 导航菜单 -->
        <nav class="hidden md:flex space-x-8">
          <a href="index.html" class="sidebar-item text-gray-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">
            <i class="fas fa-home mr-2"></i>首页
          </a>
          <a href="#" class="sidebar-item active text-gray-900 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">
            <i class="fas fa-users mr-2"></i>账户管理
          </a>
          <a href="#" class="sidebar-item text-gray-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">
            <i class="fab fa-facebook mr-2"></i>Facebook广告
          </a>
          <a href="operation-records.html" class="sidebar-item text-gray-500 hover:text-blue-600 px-3 py-2 rounded-md text-sm font-medium">
            <i class="fas fa-history mr-2"></i>操作记录
          </a>
        </nav>

        <!-- 右侧用户区域 -->
        <div class="flex items-center space-x-4">
          <div class="relative">
            <button class="p-2 text-gray-400 hover:text-gray-500 relative">
              <i class="fas fa-bell text-lg"></i>
              <span class="absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center text-xs text-white">3</span>
            </button>
          </div>
          <div class="flex items-center space-x-3">
            <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
              <span class="text-white text-sm font-medium">A</span>
            </div>
            <span class="hidden md:block text-sm font-medium text-gray-700">管理员</span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- 主要内容区域 -->
  <main class="pt-16 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto">
    <!-- 页面标题区域 -->
    <div class="py-8">
      <div class="md:flex md:items-center md:justify-between">
        <div class="flex-1 min-w-0">
          <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate">
            账户管理
          </h2>
          <p class="mt-1 text-sm text-gray-500">
            管理您的广告账户，发起开户和充值申请
          </p>
        </div>
        <div class="mt-4 flex md:mt-0 md:ml-4 space-x-3">
          <button onclick="openModal('account')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center space-x-2">
            <i class="fas fa-plus"></i>
            <span>申请开户</span>
          </button>
          <button onclick="openModal('recharge')" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center space-x-2">
            <i class="fas fa-credit-card"></i>
            <span>单个充值</span>
          </button>
          <button onclick="openModal('batchRecharge')" class="bg-purple-600 hover:bg-purple-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center space-x-2">
            <i class="fas fa-layer-group"></i>
            <span>批量充值</span>
          </button>
        </div>
      </div>
    </div>

    <!-- 统计卡片 -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
      <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 hover:shadow-md transition-shadow duration-200">
        <div class="p-6">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-users text-blue-600"></i>
              </div>
            </div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-500">可用账户</p>
              <p class="text-2xl font-bold text-gray-900">5</p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 hover:shadow-md transition-shadow duration-200">
        <div class="p-6">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-dollar-sign text-green-600"></i>
              </div>
            </div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-500">总余额</p>
              <p class="text-2xl font-bold text-green-600">$2,580</p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 hover:shadow-md transition-shadow duration-200">
        <div class="p-6">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center">
                <i class="fas fa-clock text-orange-600"></i>
              </div>
            </div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-500">待处理申请</p>
              <p class="text-2xl font-bold text-orange-600">2</p>
            </div>
          </div>
        </div>
      </div>

      <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 hover:shadow-md transition-shadow duration-200">
        <div class="p-6">
          <div class="flex items-center">
            <div class="flex-shrink-0">
              <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                <i class="fab fa-facebook text-blue-600"></i>
              </div>
            </div>
            <div class="ml-4">
              <p class="text-sm font-medium text-gray-500">主要平台</p>
              <p class="text-2xl font-bold text-gray-900">Facebook</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 筛选区域 -->
    <div class="bg-white shadow-sm rounded-lg border border-gray-200 mb-6">
      <div class="px-6 py-4 border-b border-gray-200">
        <h3 class="text-lg font-medium text-gray-900">筛选条件</h3>
      </div>
      <div class="p-6">
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">搜索账户</label>
            <input type="text" placeholder="输入账户ID或名称" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">平台类型</label>
            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
              <option value="">全部平台</option>
              <option value="facebook">Facebook</option>
              <option value="google">Google</option>
            </select>
          </div>
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-2">账户状态</label>
            <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
              <option value="">全部状态</option>
              <option value="active">活跃</option>
              <option value="inactive">停用</option>
              <option value="pending">待审核</option>
            </select>
          </div>
          <div class="flex items-end">
            <button class="w-full bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium transition-colors duration-200">
              <i class="fas fa-search mr-2"></i>搜索
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- 账户列表表格 -->
    <div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
      <div class="px-6 py-4 border-b border-gray-200">
        <h3 class="text-lg font-medium text-gray-900">账户列表</h3>
      </div>
      <div class="overflow-x-auto">
        <table class="min-w-full divide-y divide-gray-200 table-hover">
          <thead class="bg-gray-50">
            <tr>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">账户信息</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">所属平台</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">账户状态</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">币种</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">余额</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">时区</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">创建时间</th>
              <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">操作</th>
            </tr>
          </thead>
          <tbody class="bg-white divide-y divide-gray-200">
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div>
                  <div class="text-sm font-medium text-gray-900">FB001234567</div>
                  <div class="text-sm text-gray-500">测试广告账户01</div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <i class="fab fa-facebook text-blue-600 mr-2"></i>
                  <span class="text-sm text-gray-900">Facebook</span>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                  活跃
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">USD</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">1,200.50</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm text-gray-500">UTC+8</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                2024-01-15
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                <button onclick="openModal('recharge', 'FB001234567')" class="text-blue-600 hover:text-blue-900 bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded transition-colors duration-200">
                  充值
                </button>
                <button class="text-gray-600 hover:text-gray-900 bg-gray-50 hover:bg-gray-100 px-3 py-1 rounded transition-colors duration-200">
                  详情
                </button>
              </td>
            </tr>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div>
                  <div class="text-sm font-medium text-gray-900">FB001234568</div>
                  <div class="text-sm text-gray-500">测试广告账户02</div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <i class="fab fa-facebook text-blue-600 mr-2"></i>
                  <span class="text-sm text-gray-900">Facebook</span>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                  活跃
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">USD</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">850.75</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm text-gray-500">UTC+8</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                2024-01-20
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                <button onclick="openModal('recharge', 'FB001234568')" class="text-blue-600 hover:text-blue-900 bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded transition-colors duration-200">
                  充值
                </button>
                <button class="text-gray-600 hover:text-gray-900 bg-gray-50 hover:bg-gray-100 px-3 py-1 rounded transition-colors duration-200">
                  详情
                </button>
              </td>
            </tr>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div>
                  <div class="text-sm font-medium text-gray-900">FB001234569</div>
                  <div class="text-sm text-gray-500">测试广告账户03</div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <i class="fab fa-facebook text-blue-600 mr-2"></i>
                  <span class="text-sm text-gray-900">Facebook</span>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-yellow-100 text-yellow-800">
                  待审核
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">USD</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">0.00</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm text-gray-500">UTC+0</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                2024-02-01
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                <button disabled class="text-gray-400 bg-gray-100 px-3 py-1 rounded cursor-not-allowed">
                  充值
                </button>
                <button class="text-gray-600 hover:text-gray-900 bg-gray-50 hover:bg-gray-100 px-3 py-1 rounded transition-colors duration-200">
                  详情
                </button>
              </td>
            </tr>
            <tr>
              <td class="px-6 py-4 whitespace-nowrap">
                <div>
                  <div class="text-sm font-medium text-gray-900">GG001234570</div>
                  <div class="text-sm text-gray-500">Google广告账户01</div>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <div class="flex items-center">
                  <i class="fab fa-google text-red-600 mr-2"></i>
                  <span class="text-sm text-gray-900">Google</span>
                </div>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800">
                  活跃
                </span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">USD</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm font-medium text-gray-900">530.25</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap">
                <span class="text-sm text-gray-500">UTC-5</span>
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
                2024-01-25
              </td>
              <td class="px-6 py-4 whitespace-nowrap text-sm font-medium space-x-2">
                <button onclick="openModal('recharge', 'GG001234570')" class="text-blue-600 hover:text-blue-900 bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded transition-colors duration-200">
                  充值
                </button>
                <button class="text-gray-600 hover:text-gray-900 bg-gray-50 hover:bg-gray-100 px-3 py-1 rounded transition-colors duration-200">
                  详情
                </button>
              </td>
            </tr>
          </tbody>
                         </table>
               </div>
             </div>
  </main>

  <!-- 开户申请模态框 -->
  <div id="accountModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 modal-backdrop hidden z-50">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full animate-fadeIn">
        <div class="px-6 py-4 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-medium text-gray-900">申请开户</h3>
            <button onclick="closeModal('accountModal')" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <form class="px-6 py-4">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">投放URL *</label>
              <input type="url" placeholder="请输入要投放的网站URL" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">账户时区 *</label>
              <select required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="">请选择时区</option>
                <option value="UTC+8">UTC+8 (北京时间)</option>
                <option value="UTC+0">UTC+0 (格林威治时间)</option>
                <option value="UTC-5">UTC-5 (美国东部时间)</option>
                <option value="UTC-8">UTC-8 (美国西部时间)</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Facebook Page页面</label>
              <input type="text" placeholder="如需要，请输入Facebook Page链接" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
              <p class="mt-1 text-sm text-gray-500">部分客户开户需要提供Facebook Page</p>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">备注说明</label>
              <textarea placeholder="请输入备注信息（可选）" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
            </div>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" onclick="closeModal('accountModal')" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200">
              取消
            </button>
            <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 transition-colors duration-200">
              提交申请
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 充值申请模态框 -->
  <div id="rechargeModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 modal-backdrop hidden z-50">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full animate-fadeIn">
        <div class="px-6 py-4 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-medium text-gray-900">账户充值</h3>
            <button onclick="closeModal('rechargeModal')" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <form class="px-6 py-4">
          <div class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">选择广告账户 *</label>
              <select required id="rechargeAccountSelect" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="">请选择要充值的账户</option>
                <option value="FB001234567">FB001234567 - 测试广告账户01</option>
                <option value="FB001234568">FB001234568 - 测试广告账户02</option>
                <option value="GG001234570">GG001234570 - Google广告账户01</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">充值金额 *</label>
              <input type="number" placeholder="请输入充值金额" min="10" step="0.01" required class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
              <p class="mt-1 text-sm text-gray-500">最低充值金额：$10</p>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">币种</label>
              <select class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                <option value="USD">USD (美元)</option>
                <option value="EUR">EUR (欧元)</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">备注说明</label>
              <textarea placeholder="请输入备注信息（可选）" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
            </div>
          </div>
          <div class="flex justify-end space-x-3 mt-6">
            <button type="button" onclick="closeModal('rechargeModal')" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200">
              取消
            </button>
            <button type="submit" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 transition-colors duration-200">
              提交申请
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- 批量充值申请模态框 -->
  <div id="batchRechargeModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 modal-backdrop hidden z-50">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full animate-fadeIn max-h-[90vh] overflow-y-auto">
        <div class="px-6 py-4 border-b border-gray-200 sticky top-0 bg-white">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-medium text-gray-900">批量充值申请</h3>
            <button onclick="closeModal('batchRechargeModal')" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <form class="px-6 py-4" id="batchRechargeForm">
          <div class="space-y-6">
            <!-- 账户选择区域 -->
            <div>
              <div class="flex items-center justify-between mb-4">
                <label class="block text-sm font-medium text-gray-700">选择充值账户</label>
                <div class="flex space-x-2">
                  <button type="button" onclick="selectAllAccounts()" class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                    <i class="fas fa-check-square mr-1"></i>全选
                  </button>
                  <button type="button" onclick="deselectAllAccounts()" class="text-gray-600 hover:text-gray-800 text-sm font-medium">
                    <i class="fas fa-square mr-1"></i>取消全选
                  </button>
                </div>
              </div>
              
              <!-- 搜索框 -->
              <div class="mb-4">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4">
                  <div class="flex-1">
                    <div class="relative">
                      <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                        <i class="fas fa-search text-gray-400"></i>
                      </div>
                      <input type="text" id="accountSearch" placeholder="搜索账户ID、账户名称或平台..." 
                             class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm"
                             oninput="filterAccounts(this.value)">
                      <div class="absolute inset-y-0 right-0 pr-3 flex items-center">
                        <button type="button" onclick="clearSearch()" class="text-gray-400 hover:text-gray-600" id="clearSearchBtn" style="display: none;">
                          <i class="fas fa-times"></i>
                        </button>
                      </div>
                    </div>
                  </div>
                  <div class="flex items-center gap-3">
                    <div class="text-sm text-gray-600">
                      每页显示
                      <select id="pageSize" onchange="changePageSize(this.value)" class="mx-1 px-2 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500">
                        <option value="5">5</option>
                        <option value="5" selected>5</option>
                        <option value="10">10</option>
                        <option value="20">20</option>
                        <option value="50">50</option>
                      </select>
                      条
                    </div>
                  </div>
                </div>
                
                <!-- 统计信息栏 -->
                <div class="mt-3 flex flex-wrap items-center justify-between gap-2 text-sm text-gray-600">
                  <div class="flex items-center gap-4">
                    <span id="searchResultInfo">显示 1-5 条，共 10 条账户</span>
                    <span id="selectedInfo" class="text-blue-600 font-medium">已选中 0 个账户</span>
                  </div>
                  <div class="text-xs text-gray-500">
                    支持按账户ID、账户名称或平台类型搜索
                  </div>
                </div>
              </div>
              
              <!-- 可充值账户列表 -->
              <div class="border border-gray-200 rounded-lg overflow-hidden">
                <table class="min-w-full divide-y divide-gray-200">
                  <thead class="bg-gray-50">
                    <tr>
                      <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-12">选择</th>
                      <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">账户信息</th>
                      <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">币种</th>
                      <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">当前余额</th>
                      <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">充值金额</th>
                    </tr>
                  </thead>
                                     <tbody class="bg-white divide-y divide-gray-200" id="batchRechargeAccountList">
                     <tr class="account-row" data-account="FB001234567">
                       <td class="px-4 py-4 whitespace-nowrap">
                         <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <div>
                           <div class="text-sm font-medium text-gray-900">FB001234567</div>
                           <div class="text-sm text-gray-500">测试广告账户01</div>
                         </div>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <span class="text-sm font-medium text-gray-900">USD</span>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <span class="text-sm font-medium text-gray-900">1,200.50</span>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                placeholder="输入金额" min="10" step="0.01" disabled>
                       </td>
                     </tr>
                     <tr class="account-row" data-account="FB001234568">
                       <td class="px-4 py-4 whitespace-nowrap">
                         <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <div>
                           <div class="text-sm font-medium text-gray-900">FB001234568</div>
                           <div class="text-sm text-gray-500">测试广告账户02</div>
                         </div>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <span class="text-sm font-medium text-gray-900">USD</span>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <span class="text-sm font-medium text-gray-900">850.75</span>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                placeholder="输入金额" min="10" step="0.01" disabled>
                       </td>
                     </tr>
                     <tr class="account-row" data-account="GG001234570">
                       <td class="px-4 py-4 whitespace-nowrap">
                         <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <div>
                           <div class="text-sm font-medium text-gray-900">GG001234570</div>
                           <div class="text-sm text-gray-500">Google广告账户01</div>
                         </div>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <span class="text-sm font-medium text-gray-900">USD</span>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <span class="text-sm font-medium text-gray-900">530.25</span>
                       </td>
                       <td class="px-4 py-4 whitespace-nowrap">
                         <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                placeholder="输入金额" min="10" step="0.01" disabled>
                       </td>
                     </tr>
                                           <tr class="account-row" data-account="FB001234571">
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <div>
                            <div class="text-sm font-medium text-gray-900">FB001234571</div>
                            <div class="text-sm text-gray-500">Facebook跨境电商账户</div>
                          </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">USD</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">2,150.80</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                 placeholder="输入金额" min="10" step="0.01" disabled>
                        </td>
                      </tr>
                                            <tr class="account-row" data-account="FB001234572">
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <div>
                            <div class="text-sm font-medium text-gray-900">FB001234572</div>
                            <div class="text-sm text-gray-500">Facebook游戏推广账户</div>
                          </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">USD</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">675.30</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                 placeholder="输入金额" min="10" step="0.01" disabled>
                        </td>
                      </tr>
                      <tr class="account-row" data-account="GG001234573">
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <div>
                            <div class="text-sm font-medium text-gray-900">GG001234573</div>
                            <div class="text-sm text-gray-500">Google搜索广告账户</div>
                          </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">USD</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">1,320.45</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                 placeholder="输入金额" min="10" step="0.01" disabled>
                        </td>
                      </tr>
                      <tr class="account-row" data-account="FB001234574">
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <div>
                            <div class="text-sm font-medium text-gray-900">FB001234574</div>
                            <div class="text-sm text-gray-500">Facebook本地服务账户</div>
                          </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">USD</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">890.60</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                 placeholder="输入金额" min="10" step="0.01" disabled>
                        </td>
                      </tr>
                      <tr class="account-row" data-account="FB001234575">
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <div>
                            <div class="text-sm font-medium text-gray-900">FB001234575</div>
                            <div class="text-sm text-gray-500">Facebook品牌推广账户</div>
                          </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">EUR</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">435.90</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                 placeholder="输入金额" min="10" step="0.01" disabled>
                        </td>
                      </tr>
                      <tr class="account-row" data-account="GG001234576">
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <div>
                            <div class="text-sm font-medium text-gray-900">GG001234576</div>
                            <div class="text-sm text-gray-500">Google视频广告账户</div>
                          </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">USD</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">755.35</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                 placeholder="输入金额" min="10" step="0.01" disabled>
                        </td>
                      </tr>
                      <tr class="account-row" data-account="FB001234577">
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <div>
                            <div class="text-sm font-medium text-gray-900">FB001234577</div>
                            <div class="text-sm text-gray-500">Facebook应用推广账户</div>
                          </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">USD</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">1,580.20</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                 placeholder="输入金额" min="10" step="0.01" disabled>
                        </td>
                      </tr>
                      <tr class="account-row" data-account="GG001234578">
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="checkbox" class="account-checkbox h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded" onchange="toggleAccountRow(this)">
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <div>
                            <div class="text-sm font-medium text-gray-900">GG001234578</div>
                            <div class="text-sm text-gray-500">Google购物广告账户</div>
                          </div>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">USD</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <span class="text-sm font-medium text-gray-900">990.85</span>
                        </td>
                        <td class="px-4 py-4 whitespace-nowrap">
                          <input type="number" class="amount-input w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" 
                                 placeholder="输入金额" min="10" step="0.01" disabled>
                        </td>
                      </tr>
                   </tbody>
                </table>
              </div>
              
              <!-- 分页控件 -->
              <div class="px-4 py-3 border-t border-gray-200 bg-gray-50 sm:px-6">
                <div class="flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3">
                  <div class="text-sm text-gray-700">
                    显示第 <span id="pageStart">1</span> - <span id="pageEnd">5</span> 条，共 <span id="totalRecords">10</span> 条记录
                  </div>
                  <div class="flex items-center gap-2">
                    <button id="prevPageBtn" onclick="changePage('prev')" 
                            class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed" 
                            disabled>
                      <i class="fas fa-chevron-left mr-1"></i>上一页
                    </button>
                    
                    <div class="flex items-center gap-1" id="pageNumbers">
                      <!-- 页码按钮将动态生成 -->
                    </div>
                    
                    <button id="nextPageBtn" onclick="changePage('next')" 
                            class="px-3 py-2 text-sm font-medium text-gray-500 bg-white border border-gray-300 rounded-md hover:bg-gray-50 hover:text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed" 
                            disabled>
                      下一页<i class="fas fa-chevron-right ml-1"></i>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 充值摘要 -->
            <div class="bg-gray-50 rounded-lg p-4" id="batchRechargeSummary" style="display: none;">
              <h4 class="text-sm font-medium text-gray-900 mb-3">充值摘要</h4>
              <div class="space-y-2" id="summaryList">
                <!-- 动态生成摘要内容 -->
              </div>
              <div class="border-t border-gray-200 pt-3 mt-3">
                <div class="flex justify-between text-sm font-medium text-gray-900">
                  <span>总计金额：</span>
                  <span id="totalAmount">$0.00</span>
                </div>
                <div class="flex justify-between text-sm text-gray-500 mt-1">
                  <span>选中账户数：</span>
                  <span id="selectedCount">0</span>
                </div>
              </div>
            </div>

            <!-- 通用设置 -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">批量设置</label>
              <div>
                <label class="block text-xs text-gray-500 mb-1">快速金额设置</label>
                <div class="flex space-x-2">
                  <button type="button" onclick="setAmountForSelected(100)" class="px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors">100</button>
                  <button type="button" onclick="setAmountForSelected(500)" class="px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors">500</button>
                  <button type="button" onclick="setAmountForSelected(1000)" class="px-3 py-1 text-xs bg-gray-100 hover:bg-gray-200 rounded transition-colors">1000</button>
                  <input type="number" id="customAmount" placeholder="自定义" class="w-20 px-2 py-1 text-xs border border-gray-300 rounded">
                  <button type="button" onclick="setAmountForSelected(document.getElementById('customAmount').value)" class="px-3 py-1 text-xs bg-blue-100 hover:bg-blue-200 text-blue-700 rounded transition-colors">应用</button>
                </div>
              </div>
            </div>

            <!-- 备注说明 -->
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">备注说明</label>
              <textarea placeholder="请输入批量充值的备注信息（可选）" rows="3" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
            </div>
          </div>
          
          <div class="flex justify-end space-x-3 mt-6 pt-4 border-t border-gray-200">
            <button type="button" onclick="closeModal('batchRechargeModal')" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200">
              取消
            </button>
            <button type="submit" id="batchSubmitBtn" class="px-4 py-2 text-sm font-medium text-white bg-purple-600 border border-transparent rounded-md hover:bg-purple-700 transition-colors duration-200" disabled>
              提交批量充值申请
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    // 导航切换
    document.querySelectorAll('.sidebar-item').forEach(item => {
      item.addEventListener('click', function(e) {
        if (this.getAttribute('href') === '#') {
          e.preventDefault();
        }
        document.querySelectorAll('.sidebar-item').forEach(nav => nav.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // 模态框操作
    function openModal(type, accountId = '') {
      if (type === 'account') {
        document.getElementById('accountModal').classList.remove('hidden');
      } else if (type === 'recharge') {
        document.getElementById('rechargeModal').classList.remove('hidden');
        if (accountId) {
          document.getElementById('rechargeAccountSelect').value = accountId;
        }
      } else if (type === 'batchRecharge') {
        document.getElementById('batchRechargeModal').classList.remove('hidden');
        // 初始化分页和数据
        initializePagination();
        resetBatchRechargeForm();
      }
    }

    function closeModal(modalId) {
      document.getElementById(modalId).classList.add('hidden');
    }

    // 点击模态框外部关闭
    document.addEventListener('click', function(event) {
      if (event.target.classList.contains('modal-backdrop')) {
        event.target.classList.add('hidden');
      }
    });

    // 表单提交处理
    document.querySelectorAll('form').forEach(form => {
      form.addEventListener('submit', function(e) {
        e.preventDefault();
        showNotification('申请已提交，我们将尽快处理！', 'success');
        const modal = this.closest('.fixed');
        if (modal) {
          modal.classList.add('hidden');
        }
      });
    });

    // 现代化通知函数
    function showNotification(message, type = 'info') {
      const notification = document.createElement('div');
      notification.className = `fixed top-20 right-4 z-50 max-w-sm w-full bg-white shadow-lg rounded-lg pointer-events-auto transform transition-all duration-300 translate-x-full`;
      
      const typeColors = {
        'info': 'border-blue-400 text-blue-700',
        'success': 'border-green-400 text-green-700',
        'warning': 'border-yellow-400 text-yellow-700',
        'error': 'border-red-400 text-red-700'
      };
      
      notification.innerHTML = `
        <div class="rounded-lg shadow-lg border-l-4 ${typeColors[type]} p-4">
          <div class="flex">
            <div class="flex-shrink-0">
              <i class="fas fa-check-circle"></i>
            </div>
            <div class="ml-3">
              <p class="text-sm font-medium">${message}</p>
            </div>
            <div class="ml-auto pl-3">
              <button onclick="this.closest('.fixed').remove()" class="text-gray-400 hover:text-gray-600">
                <i class="fas fa-times"></i>
              </button>
            </div>
          </div>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.classList.remove('translate-x-full');
      }, 100);
      
      setTimeout(() => {
        notification.classList.add('translate-x-full');
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    // 分页相关变量
    let currentPage = 1;
    let pageSize = 5;
    let allAccountRows = [];
    let filteredRows = [];

    // 批量充值功能
    function resetBatchRechargeForm() {
      // 重置所有复选框
      document.querySelectorAll('.account-checkbox').forEach(checkbox => {
        checkbox.checked = false;
      });
      
              // 禁用所有输入框
        document.querySelectorAll('.amount-input').forEach(input => {
          input.disabled = true;
          input.value = '';
        });
      
      // 隐藏摘要
      document.getElementById('batchRechargeSummary').style.display = 'none';
      
      // 禁用提交按钮
      document.getElementById('batchSubmitBtn').disabled = true;
      
              // 重置批量设置
        document.getElementById('customAmount').value = '';
      
      // 重置搜索和分页
      document.getElementById('accountSearch').value = '';
      document.getElementById('clearSearchBtn').style.display = 'none';
      currentPage = 1;
      pageSize = parseInt(document.getElementById('pageSize').value);
      
      // 初始化账户数据
      allAccountRows = Array.from(document.querySelectorAll('#batchRechargeAccountList .account-row'));
      filteredRows = [...allAccountRows];
      
      // 更新显示
      updatePagination();
      updateStatistics();
    }

    // 初始化分页数据
    function initializePagination() {
      allAccountRows = Array.from(document.querySelectorAll('#batchRechargeAccountList .account-row'));
      filteredRows = [...allAccountRows];
      currentPage = 1;
      pageSize = parseInt(document.getElementById('pageSize').value);
      updatePagination();
      updateStatistics();
    }

    function selectAllAccounts() {
      // 只选择当前筛选和分页中可见的账户
      filteredRows.forEach(row => {
        if (row.style.display !== 'none') {
          const checkbox = row.querySelector('.account-checkbox');
          if (checkbox && !checkbox.checked) {
            checkbox.checked = true;
            toggleAccountRow(checkbox);
          }
        }
      });
    }

    function deselectAllAccounts() {
      // 取消选择所有已选中的账户（包括不可见的）
      document.querySelectorAll('.account-checkbox:checked').forEach(checkbox => {
        checkbox.checked = false;
        toggleAccountRow(checkbox);
      });
    }



    function toggleAccountRow(checkbox) {
      const row = checkbox.closest('.account-row');
      const amountInput = row.querySelector('.amount-input');
      
      if (checkbox.checked) {
        // 启用输入框
        amountInput.disabled = false;
        row.classList.add('bg-blue-50');
        
        // 添加事件监听器
        amountInput.addEventListener('input', updateBatchSummary);
      } else {
        // 禁用输入框并清空值
        amountInput.disabled = true;
        amountInput.value = '';
        row.classList.remove('bg-blue-50');
        
        // 移除事件监听器
        amountInput.removeEventListener('input', updateBatchSummary);
      }
      
      updateBatchSummary();
      updateStatistics(); // 更新统计信息
    }

    function setAmountForSelected(amount) {
      if (!amount || amount <= 0) return;
      
      document.querySelectorAll('.account-checkbox:checked').forEach(checkbox => {
        const row = checkbox.closest('.account-row');
        const amountInput = row.querySelector('.amount-input');
        amountInput.value = amount;
      });
      
      updateBatchSummary();
    }



    function updateBatchSummary() {
      const selectedCheckboxes = document.querySelectorAll('.account-checkbox:checked');
      const summaryDiv = document.getElementById('batchRechargeSummary');
      const summaryList = document.getElementById('summaryList');
      const totalAmountSpan = document.getElementById('totalAmount');
      const selectedCountSpan = document.getElementById('selectedCount');
      const submitBtn = document.getElementById('batchSubmitBtn');
      
      if (selectedCheckboxes.length === 0) {
        summaryDiv.style.display = 'none';
        submitBtn.disabled = true;
        return;
      }
      
      let totalAmount = 0;
      let validSelections = 0;
      let summaryHTML = '';
      
      selectedCheckboxes.forEach(checkbox => {
        const row = checkbox.closest('.account-row');
        const accountId = row.getAttribute('data-account');
        const accountName = row.querySelector('.text-sm.font-medium').textContent;
        const amountInput = row.querySelector('.amount-input');
        const currencySpan = row.querySelector('td:nth-child(3) span');
        
        const amount = parseFloat(amountInput.value);
        const currency = currencySpan.textContent;
        
        if (amount && amount >= 10) {
          totalAmount += amount;
          validSelections++;
          
          summaryHTML += `
            <div class="flex justify-between items-center text-sm">
              <span class="text-gray-700">${accountName} (${accountId})</span>
              <span class="font-medium text-gray-900">${currency} ${amount.toFixed(2)}</span>
            </div>
          `;
        }
      });
      
      summaryList.innerHTML = summaryHTML;
      totalAmountSpan.textContent = `$${totalAmount.toFixed(2)}`;
      selectedCountSpan.textContent = selectedCheckboxes.length;
      
      // 显示摘要
      summaryDiv.style.display = 'block';
      
      // 启用/禁用提交按钮
      submitBtn.disabled = validSelections === 0;
    }

    // 批量充值表单提交
    document.getElementById('batchRechargeForm').addEventListener('submit', function(e) {
      e.preventDefault();
      
      const selectedData = [];
      document.querySelectorAll('.account-checkbox:checked').forEach(checkbox => {
        const row = checkbox.closest('.account-row');
        const accountId = row.getAttribute('data-account');
        const amountInput = row.querySelector('.amount-input');
        const currencySpan = row.querySelector('td:nth-child(3) span');
        
        const amount = parseFloat(amountInput.value);
        const currency = currencySpan.textContent;
        
        if (amount && amount >= 10) {
          selectedData.push({
            accountId,
            amount,
            currency
          });
        }
      });
      
      if (selectedData.length === 0) {
        showNotification('请至少选择一个账户并设置有效的充值金额', 'warning');
        return;
      }
      
             console.log('批量充值数据:', selectedData);
       showNotification(`批量充值申请已提交！共${selectedData.length}个账户，总金额$${selectedData.reduce((sum, item) => sum + item.amount, 0).toFixed(2)}`, 'success');
       closeModal('batchRechargeModal');
     });

    

    // 分页功能
    function updatePagination() {
      const totalRows = filteredRows.length;
      const totalPages = Math.ceil(totalRows / pageSize);
      const startIndex = (currentPage - 1) * pageSize;
      const endIndex = Math.min(startIndex + pageSize, totalRows);
      
      // 隐藏所有行
      allAccountRows.forEach(row => {
        row.style.display = 'none';
      });
      
      // 显示当前页的行
      for (let i = startIndex; i < endIndex; i++) {
        if (filteredRows[i]) {
          filteredRows[i].style.display = 'table-row';
        }
      }
      
      // 更新分页信息
      document.getElementById('pageStart').textContent = totalRows > 0 ? startIndex + 1 : 0;
      document.getElementById('pageEnd').textContent = endIndex;
      document.getElementById('totalRecords').textContent = totalRows;
      
      // 更新分页按钮状态
      document.getElementById('prevPageBtn').disabled = currentPage <= 1;
      document.getElementById('nextPageBtn').disabled = currentPage >= totalPages;
      
      // 生成页码按钮
      generatePageNumbers(totalPages);
    }

    function generatePageNumbers(totalPages) {
      const pageNumbersDiv = document.getElementById('pageNumbers');
      pageNumbersDiv.innerHTML = '';
      
      if (totalPages <= 1) return;
      
      const maxVisiblePages = 5;
      let startPage = Math.max(1, currentPage - Math.floor(maxVisiblePages / 2));
      let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);
      
      if (endPage - startPage < maxVisiblePages - 1) {
        startPage = Math.max(1, endPage - maxVisiblePages + 1);
      }
      
      // 第一页
      if (startPage > 1) {
        pageNumbersDiv.appendChild(createPageButton(1));
        if (startPage > 2) {
          pageNumbersDiv.appendChild(createEllipsis());
        }
      }
      
      // 页码按钮
      for (let i = startPage; i <= endPage; i++) {
        pageNumbersDiv.appendChild(createPageButton(i));
      }
      
      // 最后一页
      if (endPage < totalPages) {
        if (endPage < totalPages - 1) {
          pageNumbersDiv.appendChild(createEllipsis());
        }
        pageNumbersDiv.appendChild(createPageButton(totalPages));
      }
    }

    function createPageButton(pageNum) {
      const button = document.createElement('button');
      button.className = `px-3 py-2 text-sm font-medium border rounded-md transition-colors ${
        pageNum === currentPage 
          ? 'bg-blue-600 text-white border-blue-600' 
          : 'bg-white text-gray-700 border-gray-300 hover:bg-gray-50'
      }`;
      button.textContent = pageNum;
      button.onclick = () => goToPage(pageNum);
      return button;
    }

    function createEllipsis() {
      const span = document.createElement('span');
      span.className = 'px-3 py-2 text-sm text-gray-500';
      span.textContent = '...';
      return span;
    }

    function goToPage(pageNum) {
      currentPage = pageNum;
      updatePagination();
      updateStatistics();
    }

    function changePage(direction) {
      if (direction === 'prev' && currentPage > 1) {
        currentPage--;
      } else if (direction === 'next') {
        const totalPages = Math.ceil(filteredRows.length / pageSize);
        if (currentPage < totalPages) {
          currentPage++;
        }
      }
      updatePagination();
      updateStatistics();
    }

    function changePageSize(newSize) {
      pageSize = parseInt(newSize);
      currentPage = 1; // 重置到第一页
      updatePagination();
      updateStatistics();
    }

    // 搜索和统计功能
    function filterAccounts(searchTerm) {
      const clearBtn = document.getElementById('clearSearchBtn');
      
      // 显示/隐藏清空按钮
      clearBtn.style.display = searchTerm.length > 0 ? 'block' : 'none';
      
      if (!searchTerm) {
        filteredRows = [...allAccountRows];
      } else {
        const searchLower = searchTerm.toLowerCase();
        filteredRows = allAccountRows.filter(row => {
          const accountId = row.querySelector('.text-sm.font-medium').textContent.toLowerCase();
          const accountName = row.querySelector('.text-sm.text-gray-500').textContent.toLowerCase();
          const platform = row.querySelector('.text-sm.text-gray-900').textContent.toLowerCase();
          
          return accountId.includes(searchLower) || 
                 accountName.includes(searchLower) || 
                 platform.includes(searchLower);
        });
      }
      
      // 重置到第一页
      currentPage = 1;
      
      // 更新显示
      updatePagination();
      updateStatistics();
      updateBatchSummary();
    }

    function clearSearch() {
      document.getElementById('accountSearch').value = '';
      filterAccounts('');
    }

    function updateStatistics() {
      const totalCount = filteredRows.length;
      const selectedCount = filteredRows.filter(row => {
        const checkbox = row.querySelector('.account-checkbox');
        return checkbox && checkbox.checked;
      }).length;
      
      // 更新搜索结果信息
      const searchResultInfo = document.getElementById('searchResultInfo');
      const startIndex = (currentPage - 1) * pageSize + 1;
      const endIndex = Math.min(currentPage * pageSize, totalCount);
      
      if (totalCount > 0) {
        searchResultInfo.textContent = `显示 ${startIndex}-${endIndex} 条，共 ${totalCount} 条账户`;
      } else {
        searchResultInfo.textContent = '未找到匹配的账户';
      }
      
      // 更新选中信息
      const selectedInfo = document.getElementById('selectedInfo');
      selectedInfo.textContent = `已选中 ${selectedCount} 个账户`;
      
      // 更新选中信息颜色
      if (selectedCount > 0) {
        selectedInfo.className = 'text-blue-600 font-medium';
      } else {
        selectedInfo.className = 'text-gray-500 font-medium';
      }
    }
  </script>
</body>
</html> 