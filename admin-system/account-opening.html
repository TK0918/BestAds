<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>开户管理 - BestAds运营系统</title>
    
    <!-- TailwindCSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- FontAwesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <!-- Inter Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    
    <style>
        body { font-family: 'Inter', sans-serif; }
        
        .card-hover {
            transition: all 0.3s ease;
        }
        
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        
        .stat-animate {
            animation: countUp 1s ease-out;
        }
        
        @keyframes countUp {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .mobile-menu-open {
            transform: translateX(0);
        }
        
        .mobile-menu-closed {
            transform: translateX(-100%);
        }
        
        .modal-backdrop {
            backdrop-filter: blur(4px);
        }
        
        .animate-fadeIn {
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        
        .table-hover tbody tr:hover {
            background-color: #f8fafc;
        }
        
        /* 表格容器样式 */
        .table-container {
            position: relative;
            overflow-x: auto;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
        }
        
        .fixed-table {
            min-width: 1200px;
        }
        
        /* 只保留右侧固定列样式 */
        .fixed-right {
            position: sticky;
            right: 0;
            background: white;
            z-index: 10;
            border-left: 2px solid #e5e7eb;
        }
        
        /* 表头固定右侧列 */
        .thead-fixed-right {
            background: #f9fafb;
            border-left: 2px solid #e5e7eb;
        }
        
        /* 右侧固定列的阴影效果 */
        .fixed-right::before {
            content: '';
            position: absolute;
            top: 0;
            left: -10px;
            bottom: 0;
            width: 10px;
            background: linear-gradient(to left, rgba(0,0,0,0.1), transparent);
            pointer-events: none;
        }
    </style>
</head>
<body class="bg-gray-50">
  <div class="flex h-screen overflow-hidden">
    <!-- 侧边栏 -->
    <aside id="sidebar" class="bg-white w-64 min-h-screen shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 mobile-menu-closed lg:mobile-menu-open fixed z-30">
      <!-- 侧边栏头部 -->
      <div class="flex items-center justify-center h-16 border-b border-gray-200">
        <div class="flex items-center">
          <div class="w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
            <i class="fas fa-chart-line text-white text-sm"></i>
          </div>
          <span class="ml-3 text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
            BestAds Admin
          </span>
        </div>
      </div>

      <!-- 侧边栏菜单 -->
      <nav class="mt-8">
        <!-- 主要功能 -->
        <div class="px-4 mb-6">
          <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">主要功能</h3>
          <ul class="space-y-1">
            <li>
              <a href="index.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-chart-bar w-5 h-5 mr-3 text-gray-400"></i>
                仪表盘
              </a>
            </li>
            <li>
              <a href="customer-management.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-users w-5 h-5 mr-3 text-gray-400"></i>
                客户管理
              </a>
            </li>
          </ul>
        </div>

        <!-- FB业务管理 -->
        <div class="px-4 mb-6">
          <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">FB业务管理</h3>
          <ul class="space-y-1">
            <li>
              <a href="account-management.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-sync w-5 h-5 mr-3 text-gray-400"></i>
                账户管理
              </a>
            </li>
            <li>
              <a href="account-opening.html" class="sidebar-item active flex items-center px-4 py-2 text-sm font-medium text-gray-900 rounded-lg hover:bg-gray-100">
                <i class="fas fa-plus-circle w-5 h-5 mr-3 text-gray-500"></i>
                开户管理
              </a>
            </li>
            <li>
              <a href="account-allocation.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-clipboard-list w-5 h-5 mr-3 text-gray-400"></i>
                账户分配
              </a>
            </li>
            <li>
              <a href="#" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-dollar-sign w-5 h-5 mr-3 text-gray-400"></i>
                充值管理
              </a>
            </li>
          </ul>
        </div>

        <!-- 系统设置 -->
        <div class="px-4">
          <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3">系统设置</h3>
          <ul class="space-y-1">
            <li>
              <a href="#" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-cog w-5 h-5 mr-3 text-gray-400"></i>
                系统配置
              </a>
            </li>
            <li>
              <a href="#" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900">
                <i class="fas fa-user-cog w-5 h-5 mr-3 text-gray-400"></i>
                用户管理
              </a>
            </li>
          </ul>
        </div>
      </nav>
    </aside>

    <!-- 遮罩层 (移动端) -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-gray-600 bg-opacity-50 opacity-0 hidden z-20 transition-opacity duration-300 ease-linear lg:hidden"></div>

    <!-- 主要内容区域 -->
    <div class="flex flex-col flex-1 overflow-hidden">
      <!-- 顶部栏 -->
      <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8">
          <!-- 左侧 -->
          <div class="flex items-center">
            <button onclick="toggleSidebar()" class="lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
              <i class="fas fa-bars text-lg"></i>
            </button>
            
            <div class="ml-4 lg:ml-0">
              <nav class="flex space-x-2 text-sm" aria-label="Breadcrumb">
                <span class="text-gray-500">主页</span>
                <i class="fas fa-chevron-right text-gray-300 text-xs mt-0.5"></i>
                <span class="text-gray-500">FB业务管理</span>
                <i class="fas fa-chevron-right text-gray-300 text-xs mt-0.5"></i>
                <span class="text-gray-900 font-medium">开户管理</span>
              </nav>
            </div>
          </div>
          
          <!-- 右侧 -->
          <div class="flex items-center space-x-4">
            <div class="relative">
              <button class="p-2 text-gray-400 hover:text-gray-500 relative">
                <i class="fas fa-bell text-lg"></i>
                <span class="absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center text-xs text-white">3</span>
              </button>
            </div>
            
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
                <span class="text-white text-sm font-medium">A</span>
              </div>
              <span class="hidden md:block text-sm font-medium text-gray-700">管理员</span>
            </div>
          </div>
        </div>
      </header>

      <!-- 页面内容 -->
      <main class="flex-1 overflow-y-auto bg-gray-50">
        <div class="py-6">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- 页面标题区域 -->
            <div class="mb-8">
              <div class="md:flex md:items-center md:justify-between">
                <div class="flex-1 min-w-0">
                  <h2 class="text-2xl font-bold leading-7 text-gray-900 sm:text-3xl sm:truncate">
                    开户管理
                  </h2>
                  <p class="mt-1 text-sm text-gray-500">
                    管理客户Facebook开户申请，处理开户流程和状态跟踪
                  </p>
                </div>
              </div>
            </div>

            <!-- 统计卡片网格 -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
              <!-- 待处理申请 -->
              <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 card-hover">
                <div class="p-6">
                  <div class="flex items-center">
                    <div class="flex-shrink-0">
                      <div class="w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-clock text-yellow-600 text-xl"></i>
                      </div>
                    </div>
                    <div class="ml-4 flex-1">
                      <p class="text-sm font-medium text-gray-500">待处理申请</p>
                      <p class="text-2xl font-bold text-gray-900 stat-animate">48</p>
                    </div>
                  </div>
                  <div class="mt-4 flex items-center text-sm">
                    <span class="text-yellow-600 font-medium flex items-center">
                      <i class="fas fa-exclamation-triangle text-xs mr-1"></i>
                      需处理
                    </span>
                  </div>
                </div>
              </div>

              <!-- 开户中 -->
              <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 card-hover">
                <div class="p-6">
                  <div class="flex items-center">
                    <div class="flex-shrink-0">
                      <div class="w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-sync-alt text-blue-600 text-xl"></i>
                      </div>
                    </div>
                    <div class="ml-4 flex-1">
                      <p class="text-sm font-medium text-gray-500">开户中</p>
                      <p class="text-2xl font-bold text-gray-900 stat-animate">23</p>
                    </div>
                  </div>
                  <div class="mt-4 flex items-center text-sm">
                    <span class="text-blue-600 font-medium flex items-center">
                      <i class="fas fa-spinner text-xs mr-1"></i>
                      进行中
                    </span>
                  </div>
                </div>
              </div>

              <!-- 开户成功 -->
              <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 card-hover">
                <div class="p-6">
                  <div class="flex items-center">
                    <div class="flex-shrink-0">
                      <div class="w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-check-circle text-green-600 text-xl"></i>
                      </div>
                    </div>
                    <div class="ml-4 flex-1">
                      <p class="text-sm font-medium text-gray-500">开户成功</p>
                      <p class="text-2xl font-bold text-gray-900 stat-animate">156</p>
                    </div>
                  </div>
                  <div class="mt-4 flex items-center text-sm">
                    <span class="text-green-600 font-medium flex items-center">
                      <i class="fas fa-arrow-up text-xs mr-1"></i>
                      +5%本周
                    </span>
                  </div>
                </div>
              </div>

              <!-- 开户失败 -->
              <div class="bg-white overflow-hidden shadow-sm rounded-lg border border-gray-200 card-hover">
                <div class="p-6">
                  <div class="flex items-center">
                    <div class="flex-shrink-0">
                      <div class="w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-times-circle text-red-600 text-xl"></i>
                      </div>
                    </div>
                    <div class="ml-4 flex-1">
                      <p class="text-sm font-medium text-gray-500">开户失败</p>
                      <p class="text-2xl font-bold text-gray-900 stat-animate">8</p>
                    </div>
                  </div>
                  <div class="mt-4 flex items-center text-sm">
                    <span class="text-red-600 font-medium flex items-center">
                      <i class="fas fa-arrow-down text-xs mr-1"></i>
                      需重试
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <!-- 筛选区域 -->
            <div class="bg-white shadow-sm rounded-lg border border-gray-200 mb-6">
              <div class="px-6 py-4 border-b border-gray-200">
                <h3 class="text-lg font-medium text-gray-900">筛选条件</h3>
              </div>
              <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-6 gap-4">
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">客户ID</label>
                    <input type="text" id="filterCustomerId" placeholder="请输入客户ID" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">客户名称</label>
                    <input type="text" id="filterCustomerName" placeholder="请输入客户名称" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">状态</label>
                    <select id="filterStatus" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                      <option value="">全部状态</option>
                      <option value="待处理">待处理</option>
                      <option value="开户中">开户中</option>
                      <option value="成功">成功</option>
                      <option value="失败">失败</option>
                    </select>
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">申请时间开始</label>
                    <input type="date" id="filterApplyDateStart" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                  </div>
                  <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">申请时间结束</label>
                    <input type="date" id="filterApplyDateEnd" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                  </div>
                  <div class="flex items-end">
                    <div class="flex space-x-2 w-full">
                      <button onclick="filterData()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-md font-medium transition-colors duration-200 flex-1">
                        <i class="fas fa-search mr-2"></i>搜索
                      </button>
                      <button onclick="resetFilter()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-md font-medium transition-colors duration-200 flex-1">
                        <i class="fas fa-redo mr-2"></i>重置
                      </button>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 操作栏和表格 -->
            <div class="bg-white shadow-sm rounded-lg border border-gray-200 overflow-hidden">
              <div class="px-6 py-4 border-b border-gray-200 flex justify-between items-center">
                <h3 class="text-lg font-medium text-gray-900">开户申请列表</h3>
                <div class="flex space-x-3">
                  <button onclick="openModal('newApplicationModal')" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center space-x-2">
                    <i class="fas fa-plus"></i>
                    <span>新建开户申请</span>
                  </button>
                  <button onclick="exportData()" class="bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center space-x-2">
                    <i class="fas fa-download"></i>
                    <span>导出数据</span>
                  </button>
                  <button onclick="refreshData()" class="bg-gray-600 hover:bg-gray-700 text-white px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 flex items-center space-x-2">
                    <i class="fas fa-sync"></i>
                    <span>刷新</span>
                  </button>
                </div>
              </div>

              <!-- 数据表格 -->
              <div class="table-container">
                <table class="fixed-table divide-y divide-gray-200 table-hover">
                  <thead class="bg-gray-50">
                    <tr>
                      <!-- 正常列 -->
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 120px;">申请ID</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 120px;">客户ID</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 200px;">客户名称</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 160px;">申请时间</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 100px;">状态</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 200px;">URL</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 150px;">时区和数量</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 120px;">Facebook Page</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 150px;">处理时间</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 120px;">开户代理</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 150px;">下户时间</th>
                      <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 200px;">账户信息</th>
                      
                      <!-- 固定右侧列 -->
                      <th class="fixed-right thead-fixed-right px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" style="width: 150px;">操作</th>
                    </tr>
                  </thead>
                  <tbody class="bg-white divide-y divide-gray-200" id="dataTableBody">
                    <tr>
                      <!-- 正常列 -->
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">REQ001</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">C001</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">科技有限公司</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-15 10:30</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800">
                          待处理
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">business.facebook.com</span>
                            <button onclick="copyToClipboard('https://business.facebook.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">techcompany.com</span>
                            <button onclick="copyToClipboard('https://techcompany.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Asia/Shanghai: 2个</td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">TechCompany</span>
                            <button onclick="copyToClipboard('TechCompany')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                      
                      <!-- 固定右侧列 -->
                      <td class="fixed-right px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <div class="flex space-x-2">
                          <button onclick="processApplication('REQ001')" class="text-blue-600 hover:text-blue-900 bg-blue-50 hover:bg-blue-100 px-3 py-1 rounded-md text-sm transition-colors duration-200">
                            处理
                          </button>
                          <button onclick="openCancelModal('REQ001')" class="text-red-600 hover:text-red-900 bg-red-50 hover:bg-red-100 px-3 py-1 rounded-md text-sm transition-colors duration-200">
                            取消开户
                          </button>
                        </div>
                      </td>
                    </tr>
                    <tr>
                      <!-- 正常列 -->
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">REQ002</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">C002</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">创新科技公司</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-14 14:20</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800">
                          开户中
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">business.facebook.com</span>
                            <button onclick="copyToClipboard('https://business.facebook.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Asia/Shanghai: 1个</td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">InnoTech</span>
                            <button onclick="copyToClipboard('InnoTech')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-14 15:00</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">代理商A</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                      
                      <!-- 固定右侧列 -->
                      <td class="fixed-right px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <span class="text-gray-400 text-sm">-</span>
                      </td>
                    </tr>
                    <tr>
                      <!-- 正常列 -->
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">REQ003</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">C003</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">营销策划公司</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-13 09:15</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                          成功
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">business.facebook.com</span>
                            <button onclick="copyToClipboard('https://business.facebook.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">marketplan.com</span>
                            <button onclick="copyToClipboard('https://marketplan.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Asia/Shanghai: 2个</td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">MarketPlan</span>
                            <button onclick="copyToClipboard('MarketPlan')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-13 10:00</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">代理商B</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-13 16:30</td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500 font-mono">AD_ACT_123456789 - 营销账户01</span>
                            <button onclick="copyToClipboard('AD_ACT_123456789')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500 font-mono">AD_ACT_987654321 - 营销账户02</span>
                            <button onclick="copyToClipboard('AD_ACT_987654321')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      
                      <!-- 固定右侧列 -->
                      <td class="fixed-right px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <span class="text-gray-400 text-sm">-</span>
                      </td>
                    </tr>
                    <tr>
                      <!-- 正常列 -->
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">REQ004</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">C004</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">电商运营公司</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-12 16:45</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800">
                          失败
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">business.facebook.com</span>
                            <button onclick="copyToClipboard('https://business.facebook.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">ecomops.com</span>
                            <button onclick="copyToClipboard('https://ecomops.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">Asia/Shanghai: 1个</td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">EcomOps</span>
                            <button onclick="copyToClipboard('EcomOps')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-12 17:00</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">代理商C</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">-</td>
                      
                      <!-- 固定右侧列 -->
                      <td class="fixed-right px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <span class="text-gray-400 text-sm">-</span>
                      </td>
                    </tr>
                    <tr>
                      <!-- 正常列 -->
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">REQ005</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">C005</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">游戏开发公司</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-11 11:20</td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800">
                          成功
                        </span>
                      </td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">business.facebook.com</span>
                            <button onclick="copyToClipboard('https://business.facebook.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">gamedev.com</span>
                            <button onclick="copyToClipboard('https://gamedev.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-blue-600">mygame.com</span>
                            <button onclick="copyToClipboard('https://mygame.com')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">America/New_York: 3个</td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">GameDev</span>
                            <button onclick="copyToClipboard('GameDev')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500">MyGamePage</span>
                            <button onclick="copyToClipboard('MyGamePage')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-11 12:00</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">代理商A</td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">2024-01-11 18:45</td>
                      <td class="px-6 py-4">
                        <div class="space-y-1">
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500 font-mono">AD_ACT_987654321 - 游戏推广账户01</span>
                            <button onclick="copyToClipboard('AD_ACT_987654321')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500 font-mono">AD_ACT_555666777 - 游戏推广账户02</span>
                            <button onclick="copyToClipboard('AD_ACT_555666777')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                          <div class="flex items-center space-x-2">
                            <span class="text-sm text-gray-500 font-mono">AD_ACT_888999000 - 游戏推广账户03</span>
                            <button onclick="copyToClipboard('AD_ACT_888999000')" class="text-gray-400 hover:text-gray-600" title="复制">
                              <i class="fas fa-copy text-xs"></i>
                            </button>
                          </div>
                        </div>
                      </td>
                      
                      <!-- 固定右侧列 -->
                      <td class="fixed-right px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <span class="text-gray-400 text-sm">-</span>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- 新建开户申请模态框 -->
  <div id="newApplicationModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 modal-backdrop hidden z-50">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full animate-fadeIn">
        <div class="px-6 py-4 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-medium text-gray-900">新建开户申请</h3>
            <button onclick="closeModal('newApplicationModal')" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <div class="px-6 py-4">
          <form id="newApplicationForm">
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
              <div class="col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-2">选择代理商 *</label>
                <select id="newAgentSelect" required onchange="showOELink()" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                  <option value="">请选择代理商</option>
                  <option value="代理商A">代理商A</option>
                  <option value="代理商B">代理商B</option>
                  <option value="代理商C">代理商C</option>
                </select>
              </div>
              <div id="oeLinkDiv" class="hidden col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-2">OE链接</label>
                <div class="flex space-x-2">
                  <input type="url" id="oeLink" readonly value="https://oe.facebook.com/openaccount" class="flex-1 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none">
                  <button type="button" onclick="openOELink()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md font-medium transition-colors duration-200">
                    <i class="fas fa-external-link-alt mr-2"></i>打开OE链接
                  </button>
                </div>
              </div>
              <div class="col-span-2">
                <label class="block text-sm font-medium text-gray-700 mb-2">Request ID *</label>
                <input type="text" id="newRequestId" required placeholder="请输入Request ID" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
              </div>
            </div>
            <div class="mt-6">
              <label class="block text-sm font-medium text-gray-700 mb-2">备注信息</label>
              <textarea rows="3" placeholder="请输入备注信息" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
            </div>
          </form>
        </div>
        <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
          <button onclick="closeModal('newApplicationModal')" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200">
            取消
          </button>
          <button onclick="submitNewApplication()" class="px-4 py-2 text-sm font-medium text-white bg-green-600 border border-transparent rounded-md hover:bg-green-700 transition-colors duration-200">
            提交申请
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 取消开户模态框 -->
  <div id="cancelModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 modal-backdrop hidden z-50">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full animate-fadeIn">
        <div class="px-6 py-4 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-medium text-gray-900">取消开户申请</h3>
            <button onclick="closeModal('cancelModal')" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <div class="px-6 py-4">
          <form id="cancelForm">
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">申请ID</label>
              <input type="text" id="cancelRequestId" readonly class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none">
            </div>
            <div class="mb-4">
              <label class="block text-sm font-medium text-gray-700 mb-2">取消原因 *</label>
              <textarea id="cancelReason" required placeholder="请输入取消开户的原因（必填，限200个字符）" maxlength="200" rows="4" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
              <div class="mt-1 text-sm text-gray-500">
                <span id="charCount">0</span>/200 字符
              </div>
            </div>
          </form>
        </div>
        <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
          <button onclick="closeModal('cancelModal')" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200">
            取消
          </button>
          <button onclick="submitCancel()" class="px-4 py-2 text-sm font-medium text-white bg-red-600 border border-transparent rounded-md hover:bg-red-700 transition-colors duration-200">
            确认取消开户
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- 处理申请模态框 -->
  <div id="processModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 modal-backdrop hidden z-50">
    <div class="flex items-center justify-center min-h-screen px-4">
      <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full animate-fadeIn">
        <div class="px-6 py-4 border-b border-gray-200">
          <div class="flex items-center justify-between">
            <h3 class="text-lg font-medium text-gray-900">处理开户申请</h3>
            <button onclick="closeModal('processModal')" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times"></i>
            </button>
          </div>
        </div>
        <div class="px-6 py-4">
          <form id="processForm">
            <!-- 处理方式选择 -->
            <div class="mb-6">
              <label class="block text-sm font-medium text-gray-700 mb-3">处理方式 *</label>
              <div class="flex space-x-6">
                <label class="flex items-center">
                  <input type="radio" name="processMethod" value="newAccount" checked onchange="toggleProcessMethod()" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                  <span class="ml-2 text-sm text-gray-700">开新账户</span>
                </label>
                <label class="flex items-center">
                  <input type="radio" name="processMethod" value="existingAccount" onchange="toggleProcessMethod()" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300">
                  <span class="ml-2 text-sm text-gray-700">现有账户</span>
                </label>
              </div>
            </div>

            <!-- 客户信息 -->
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">客户ID</label>
                <input type="text" id="processCustomerId" readonly class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none">
              </div>
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">客户名称</label>
                <input type="text" id="processCustomerName" readonly class="w-full px-3 py-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none">
              </div>
            </div>

            <!-- 开新账户内容 -->
            <div id="newAccountContent">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div class="col-span-2">
                  <label class="block text-sm font-medium text-gray-700 mb-2">选择一级代理 *</label>
                  <select id="processAgentSelect" required onchange="showProcessOELink()" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                    <option value="">请选择一级代理</option>
                    <option value="代理商A">代理商A</option>
                    <option value="代理商B">代理商B</option>
                    <option value="代理商C">代理商C</option>
                  </select>
                </div>
                <div id="processOeLinkDiv" class="hidden col-span-2">
                  <label class="block text-sm font-medium text-gray-700 mb-2">OE链接</label>
                  <div class="flex space-x-2">
                    <input type="url" id="processOeLink" readonly value="https://oe.facebook.com/openaccount" class="flex-1 px-3 py-2 border border-gray-300 rounded-md bg-gray-50 focus:outline-none">
                    <button type="button" onclick="openProcessOELink()" class="bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-md font-medium transition-colors duration-200">
                      <i class="fas fa-external-link-alt mr-2"></i>点击OE链接
                    </button>
                  </div>
                </div>
                <div class="col-span-2">
                  <label class="block text-sm font-medium text-gray-700 mb-2">Request ID *</label>
                  <input type="text" id="processRequestId" required placeholder="请输入Request ID" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent">
                </div>
              </div>
            </div>

            <!-- 现有账户内容 -->
            <div id="existingAccountContent" class="hidden">
              <div class="space-y-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">选择广告账户 *</label>
                  <div class="border border-gray-300 rounded-md">
                    <!-- 搜索框 -->
                    <div class="p-3 border-b border-gray-200">
                      <div class="relative">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                          <i class="fas fa-search text-gray-400 text-sm"></i>
                        </div>
                        <input type="text" id="accountSearch" placeholder="搜索广告账户..." class="w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm" oninput="filterAccounts()">
                      </div>
                    </div>
                    
                    <!-- 账户列表 -->
                    <div class="max-h-60 overflow-y-auto">
                      <div id="accountList" class="divide-y divide-gray-200">
                        <label class="flex items-center px-3 py-3 hover:bg-gray-50 cursor-pointer account-item" data-search="AD_ACT_123456789 营销推广账户01">
                          <input type="checkbox" name="selectedAccounts" value="AD_ACT_123456789" onchange="updateAccountSelection()" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                          <div class="ml-3 flex-1">
                            <div class="text-sm font-medium text-gray-900">AD_ACT_123456789</div>
                            <div class="text-sm text-gray-500">营销推广账户01</div>
                          </div>
                        </label>
                        <label class="flex items-center px-3 py-3 hover:bg-gray-50 cursor-pointer account-item" data-search="AD_ACT_987654321 营销推广账户02">
                          <input type="checkbox" name="selectedAccounts" value="AD_ACT_987654321" onchange="updateAccountSelection()" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                          <div class="ml-3 flex-1">
                            <div class="text-sm font-medium text-gray-900">AD_ACT_987654321</div>
                            <div class="text-sm text-gray-500">营销推广账户02</div>
                          </div>
                        </label>
                        <label class="flex items-center px-3 py-3 hover:bg-gray-50 cursor-pointer account-item" data-search="AD_ACT_555666777 游戏推广账户01">
                          <input type="checkbox" name="selectedAccounts" value="AD_ACT_555666777" onchange="updateAccountSelection()" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                          <div class="ml-3 flex-1">
                            <div class="text-sm font-medium text-gray-900">AD_ACT_555666777</div>
                            <div class="text-sm text-gray-500">游戏推广账户01</div>
                          </div>
                        </label>
                        <label class="flex items-center px-3 py-3 hover:bg-gray-50 cursor-pointer account-item" data-search="AD_ACT_888999000 游戏推广账户02">
                          <input type="checkbox" name="selectedAccounts" value="AD_ACT_888999000" onchange="updateAccountSelection()" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                          <div class="ml-3 flex-1">
                            <div class="text-sm font-medium text-gray-900">AD_ACT_888999000</div>
                            <div class="text-sm text-gray-500">游戏推广账户02</div>
                          </div>
                        </label>
                        <label class="flex items-center px-3 py-3 hover:bg-gray-50 cursor-pointer account-item" data-search="AD_ACT_111222333 电商推广账户01">
                          <input type="checkbox" name="selectedAccounts" value="AD_ACT_111222333" onchange="updateAccountSelection()" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                          <div class="ml-3 flex-1">
                            <div class="text-sm font-medium text-gray-900">AD_ACT_111222333</div>
                            <div class="text-sm text-gray-500">电商推广账户01</div>
                          </div>
                        </label>
                        <label class="flex items-center px-3 py-3 hover:bg-gray-50 cursor-pointer account-item" data-search="AD_ACT_444555666 跨境电商账户01">
                          <input type="checkbox" name="selectedAccounts" value="AD_ACT_444555666" onchange="updateAccountSelection()" class="h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded">
                          <div class="ml-3 flex-1">
                            <div class="text-sm font-medium text-gray-900">AD_ACT_444555666</div>
                            <div class="text-sm text-gray-500">跨境电商账户01</div>
                          </div>
                        </label>
                      </div>
                    </div>
                  </div>
                  <div class="mt-2 flex items-center justify-between text-sm text-gray-500">
                    <span>已选择 <span id="selectedCount" class="font-medium text-blue-600">0</span> 个账户</span>
                    <span>最多可选择5个账户</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- 处理备注 -->
            <div class="mt-6">
              <label class="block text-sm font-medium text-gray-700 mb-2">处理备注</label>
              <textarea id="processRemark" rows="3" placeholder="请输入处理备注" class="w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"></textarea>
            </div>
          </form>
        </div>
        <div class="px-6 py-4 border-t border-gray-200 flex justify-end space-x-3">
          <button onclick="closeModal('processModal')" class="px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors duration-200">
            取消
          </button>
          <button onclick="submitProcess()" class="px-4 py-2 text-sm font-medium text-white bg-blue-600 border border-transparent rounded-md hover:bg-blue-700 transition-colors duration-200">
            确认处理
          </button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 移动端侧边栏控制
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      
      sidebar.classList.toggle('mobile-menu-closed');
      sidebar.classList.toggle('mobile-menu-open');
      
      if (sidebar.classList.contains('mobile-menu-open')) {
        overlay.classList.remove('hidden');
        overlay.classList.add('opacity-50');
      } else {
        overlay.classList.add('hidden');
        overlay.classList.remove('opacity-50');
      }
    }

    // 点击遮罩层关闭侧边栏
    document.getElementById('sidebar-overlay').addEventListener('click', function() {
      toggleSidebar();
    });

    // 模态框控制
    function openModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.classList.remove('hidden');
        // 阻止body滚动
        document.body.style.overflow = 'hidden';
      }
    }

    function closeModal(modalId) {
      const modal = document.getElementById(modalId);
      if (modal) {
        modal.classList.add('hidden');
        // 恢复body滚动
        document.body.style.overflow = 'auto';
        
        // 重置表单
        if (modalId === 'newApplicationModal') {
          const form = document.getElementById('newApplicationForm');
          if (form) {
            form.reset();
          }
          const oeLinkDiv = document.getElementById('oeLinkDiv');
          if (oeLinkDiv) {
            oeLinkDiv.classList.add('hidden');
          }
        } else if (modalId === 'processModal') {
          const form = document.getElementById('processForm');
          if (form) {
            form.reset();
          }
          const processOeLinkDiv = document.getElementById('processOeLinkDiv');
          if (processOeLinkDiv) {
            processOeLinkDiv.classList.add('hidden');
          }
          // 重置处理方式为开新账户
          const newAccountRadio = document.querySelector('input[name="processMethod"][value="newAccount"]');
          if (newAccountRadio) {
            newAccountRadio.checked = true;
          }
          const newAccountContent = document.getElementById('newAccountContent');
          const existingAccountContent = document.getElementById('existingAccountContent');
          if (newAccountContent) {
            newAccountContent.classList.remove('hidden');
          }
          if (existingAccountContent) {
            existingAccountContent.classList.add('hidden');
          }
          // 清空现有账户选择
          clearExistingAccountSelections();
          // 重置备注
          const processRemark = document.getElementById('processRemark');
          if (processRemark) {
            processRemark.value = '';
          }
        } else if (modalId === 'cancelModal') {
          const form = document.getElementById('cancelForm');
          if (form) {
            form.reset();
          }
          const charCount = document.getElementById('charCount');
          if (charCount) {
            charCount.textContent = '0';
          }
        }
      }
    }

    // 点击模态框外部关闭
    document.addEventListener('click', function(event) {
      if (event.target.classList.contains('modal-backdrop')) {
        // 找到对应的模态框ID
        const modalElement = event.target;
        const modalId = modalElement.id;
        if (modalId) {
          closeModal(modalId);
        }
      }
    });

    // ESC键关闭模态框
    document.addEventListener('keydown', function(event) {
      if (event.key === 'Escape') {
        // 查找当前打开的模态框
        const openModals = document.querySelectorAll('.modal-backdrop:not(.hidden)');
        if (openModals.length > 0) {
          // 关闭最后一个打开的模态框
          const lastModal = openModals[openModals.length - 1];
          const modalId = lastModal.id;
          if (modalId) {
            closeModal(modalId);
          }
        }
      }
    });

    // 新建申请时显示OE链接
    function showOELink() {
      const agentSelect = document.getElementById('newAgentSelect');
      const oeLinkDiv = document.getElementById('oeLinkDiv');
      
      if (agentSelect.value) {
        oeLinkDiv.classList.remove('hidden');
      } else {
        oeLinkDiv.classList.add('hidden');
      }
    }

    // 打开新建申请的OE链接
    function openOELink() {
      const oeLink = document.getElementById('oeLink').value;
      window.open(oeLink, '_blank');
    }

    // 处理申请时显示OE链接
    function showProcessOELink() {
      const agentSelect = document.getElementById('processAgentSelect');
      const oeLinkDiv = document.getElementById('processOeLinkDiv');
      
      if (agentSelect.value) {
        oeLinkDiv.classList.remove('hidden');
      } else {
        oeLinkDiv.classList.add('hidden');
      }
    }

    // 切换处理方式
    function toggleProcessMethod() {
      const newAccountRadio = document.querySelector('input[name="processMethod"][value="newAccount"]');
      const existingAccountRadio = document.querySelector('input[name="processMethod"][value="existingAccount"]');
      const newAccountContent = document.getElementById('newAccountContent');
      const existingAccountContent = document.getElementById('existingAccountContent');
      
      if (newAccountRadio.checked) {
        newAccountContent.classList.remove('hidden');
        existingAccountContent.classList.add('hidden');
        // 清空现有账户的选择
        clearExistingAccountSelections();
      } else if (existingAccountRadio.checked) {
        newAccountContent.classList.add('hidden');
        existingAccountContent.classList.remove('hidden');
        // 清空开新账户的必填项
        clearNewAccountFields();
      }
    }

    // 清空现有账户选择
    function clearExistingAccountSelections() {
      const checkboxes = document.querySelectorAll('input[name="selectedAccounts"]');
      checkboxes.forEach(checkbox => {
        checkbox.checked = false;
      });
      updateAccountSelection();
      const accountSearch = document.getElementById('accountSearch');
      if (accountSearch) {
        accountSearch.value = '';
        filterAccounts();
      }
    }

    // 清空开新账户字段
    function clearNewAccountFields() {
      document.getElementById('processAgentSelect').value = '';
      document.getElementById('processRequestId').value = '';
      document.getElementById('processOeLinkDiv').classList.add('hidden');
    }

    // 搜索过滤广告账户
    function filterAccounts() {
      const searchTerm = document.getElementById('accountSearch').value.toLowerCase();
      const accountItems = document.querySelectorAll('.account-item');
      
      accountItems.forEach(item => {
        const searchData = item.getAttribute('data-search').toLowerCase();
        if (searchData.includes(searchTerm)) {
          item.style.display = 'flex';
        } else {
          item.style.display = 'none';
        }
      });
    }

    // 更新账户选择统计
    function updateAccountSelection() {
      const selectedCheckboxes = document.querySelectorAll('input[name="selectedAccounts"]:checked');
      const selectedCount = selectedCheckboxes.length;
      
      document.getElementById('selectedCount').textContent = selectedCount;
      
      // 限制最多选择5个
      if (selectedCount >= 5) {
        const uncheckedBoxes = document.querySelectorAll('input[name="selectedAccounts"]:not(:checked)');
        uncheckedBoxes.forEach(checkbox => {
          checkbox.disabled = true;
          checkbox.parentElement.style.opacity = '0.5';
        });
      } else {
        const allCheckboxes = document.querySelectorAll('input[name="selectedAccounts"]');
        allCheckboxes.forEach(checkbox => {
          checkbox.disabled = false;
          checkbox.parentElement.style.opacity = '1';
        });
      }
    }

    // 打开处理申请的OE链接
    function openProcessOELink() {
      const oeLink = document.getElementById('processOeLink').value;
      window.open(oeLink, '_blank');
    }

    // 筛选功能
    function filterData() {
      const customerId = document.getElementById('filterCustomerId').value;
      const customerName = document.getElementById('filterCustomerName').value;
      const status = document.getElementById('filterStatus').value;
      const applyDateStart = document.getElementById('filterApplyDateStart').value;
      const applyDateEnd = document.getElementById('filterApplyDateEnd').value;
      
      console.log('筛选条件：', { customerId, customerName, status, applyDateStart, applyDateEnd });
      // 这里应该调用后端API进行筛选
      alert('筛选功能已触发，请查看控制台');
    }

    function resetFilter() {
      document.getElementById('filterCustomerId').value = '';
      document.getElementById('filterCustomerName').value = '';
      document.getElementById('filterStatus').value = '';
      document.getElementById('filterApplyDateStart').value = '';
      document.getElementById('filterApplyDateEnd').value = '';
      // 重新加载数据
      refreshData();
    }

    // 新建开户申请
    function submitNewApplication() {
      const form = document.getElementById('newApplicationForm');
      if (form.checkValidity()) {
        const requestId = document.getElementById('newRequestId').value;
        if (!requestId) {
          alert('请输入Request ID');
          return;
        }
        alert('开户申请已提交！Request ID: ' + requestId);
        closeModal('newApplicationModal');
        refreshData();
      } else {
        alert('请填写所有必填字段');
      }
    }

    // 处理申请
    function processApplication(customerId) {
      openModal('processModal');
      // 填充客户信息
      document.getElementById('processCustomerId').value = customerId;
      // 这里应该根据customerId获取客户名称
      const customerNames = {
        'C001': '科技有限公司',
        'C002': '创新科技公司',
        'C003': '营销策划公司',
        'C004': '电商运营公司',
        'C005': '游戏开发公司'
      };
      document.getElementById('processCustomerName').value = customerNames[customerId] || '';
    }

    function submitProcess() {
      const processMethod = document.querySelector('input[name="processMethod"]:checked').value;
      const customerId = document.getElementById('processCustomerId').value;
      const customerName = document.getElementById('processCustomerName').value;
      const remark = document.getElementById('processRemark').value;
      
      if (processMethod === 'newAccount') {
        // 开新账户验证
        const agent = document.getElementById('processAgentSelect').value;
        const requestId = document.getElementById('processRequestId').value;
        
        if (!agent) {
          alert('请选择一级代理');
          return;
        }
        
        if (!requestId) {
          alert('请输入Request ID');
          return;
        }
        
        console.log('开新账户处理：', {
          customerId,
          customerName,
          agent,
          requestId,
          remark
        });
        
        alert(`开新账户处理完成！\n客户：${customerName}\nRequest ID：${requestId}\n代理商：${agent}`);
        
      } else if (processMethod === 'existingAccount') {
        // 现有账户验证
        const selectedAccounts = document.querySelectorAll('input[name="selectedAccounts"]:checked');
        
        if (selectedAccounts.length === 0) {
          alert('请至少选择一个广告账户');
          return;
        }
        
        const accountIds = Array.from(selectedAccounts).map(cb => cb.value);
        
        console.log('现有账户处理：', {
          customerId,
          customerName,
          selectedAccounts: accountIds,
          remark
        });
        
        alert(`现有账户处理完成！\n客户：${customerName}\n已选择账户：${accountIds.length}个\n账户ID：${accountIds.join(', ')}`);
      }
      
      closeModal('processModal');
      refreshData();
    }

    // 取消开户
    function cancelAccountOpening() {
      if (confirm('确定要取消开户吗？状态将变更为开户失败。')) {
        const customerId = document.getElementById('processCustomerId').value;
        alert(`已取消开户申请：${customerId}，状态已更新为开户失败`);
        closeModal('processModal');
        refreshData();
      }
    }

    // 更新状态功能
    function updateStatus(customerId) {
      const updateBtn = document.getElementById(`updateBtn-${customerId}`);
      
      // 显示loading状态
      updateBtn.innerHTML = '<i class="fas fa-spinner fa-spin mr-2"></i>更新中...';
      updateBtn.disabled = true;
      
      // 模拟API调用
      setTimeout(() => {
        alert(`${customerId} 状态已更新`);
        
        // 恢复按钮状态
        updateBtn.innerHTML = '更新状态';
        updateBtn.disabled = false;
        
        // 刷新页面数据
        refreshData();
      }, 2000);
    }

    // 其他操作函数
    function editApplication(customerId) {
      alert(`编辑申请：${customerId}`);
    }

    function viewProgress(customerId) {
      alert(`查看进度：${customerId}`);
    }

    function cancelApplication(customerId) {
      if (confirm('确定要取消这个开户申请吗？')) {
        alert(`已取消申请：${customerId}`);
        refreshData();
      }
    }

    function viewAccount(customerId) {
      alert(`查看账户：${customerId}`);
    }

    function viewDetails(customerId) {
      alert(`查看详情：${customerId}`);
    }

    function retryApplication(customerId) {
      if (confirm('确定要重试这个开户申请吗？')) {
        alert(`重试申请：${customerId}`);
        refreshData();
      }
    }

    function viewFailReason(customerId) {
      alert(`查看失败原因：${customerId}`);
    }

    function exportData() {
      alert('导出数据功能');
    }

    function refreshData() {
      console.log('数据已刷新');
      // 这里应该重新加载表格数据
      location.reload();
    }

    // 复制到剪贴板功能
    function copyToClipboard(text) {
      navigator.clipboard.writeText(text).then(function() {
        // 简单的提示效果
        const tooltip = document.createElement('div');
        tooltip.textContent = '已复制';
        tooltip.className = 'fixed top-4 right-4 bg-green-600 text-white px-3 py-2 rounded-md text-sm z-50';
        document.body.appendChild(tooltip);
        
        setTimeout(() => {
          document.body.removeChild(tooltip);
        }, 2000);
      }).catch(function() {
        alert('复制失败，请手动复制');
      });
    }

    // 打开取消开户模态框
    function openCancelModal(requestId) {
      document.getElementById('cancelRequestId').value = requestId;
      document.getElementById('cancelReason').value = '';
      document.getElementById('charCount').textContent = '0';
      openModal('cancelModal');
    }

    // 取消开户申请
    function submitCancel() {
      const requestId = document.getElementById('cancelRequestId').value;
      const reason = document.getElementById('cancelReason').value.trim();
      
      if (!reason) {
        alert('请输入取消原因');
        return;
      }
      
      if (reason.length > 200) {
        alert('取消原因不能超过200个字符');
        return;
      }
      
      if (confirm(`确定要取消开户申请 ${requestId} 吗？`)) {
        console.log('取消开户：', { requestId, reason });
        alert(`开户申请 ${requestId} 已取消`);
        closeModal('cancelModal');
        refreshData();
      }
    }

    // 字符计数功能
    document.addEventListener('DOMContentLoaded', function() {
      const cancelReason = document.getElementById('cancelReason');
      const charCount = document.getElementById('charCount');
      
      if (cancelReason && charCount) {
        cancelReason.addEventListener('input', function() {
          charCount.textContent = this.value.length;
        });
      }
    });



    // 页面加载完成后的初始化
    document.addEventListener('DOMContentLoaded', function() {
      console.log('开户管理页面已加载');
    });
  </script>
</body>
</html>