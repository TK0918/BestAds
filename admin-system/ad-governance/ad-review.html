<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>广告审核 - BestAds Admin</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
    
    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
    }

    .sidebar-item {
      position: relative;
      transition: all 0.2s ease;
    }

    .sidebar-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: 3px;
      background: #667eea;
      transform: scaleY(0);
      transition: transform 0.2s ease;
    }

    .sidebar-item.active::before,
    .sidebar-item:hover::before {
      transform: scaleY(1);
    }

    .mobile-menu-open {
      transform: translateX(0);
    }

    .mobile-menu-closed {
      transform: translateX(-100%);
    }

    .status-pending { background: #fef3c7; color: #d97706; }
    .status-auto-approved { background: #dcfce7; color: #166534; }
    .status-auto-rejected { background: #fef2f2; color: #dc2626; }
    .status-auto-uncertain { background: #e0e7ff; color: #4338ca; }
    .status-manual-approved { background: #d1fae5; color: #065f46; }
    .status-manual-rejected { background: #fee2e2; color: #991b1b; }

    .review-card {
      transition: all 0.3s ease;
      border: 1px solid #e5e7eb;
    }

    .review-card:hover {
      box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
      transform: translateY(-2px);
    }

    .media-preview {
      max-width: 200px;
      max-height: 150px;
      object-fit: cover;
    }

    .score-bar {
      height: 8px;
      background: #e5e7eb;
      border-radius: 4px;
      overflow: hidden;
    }

    .score-fill {
      height: 100%;
      transition: width 0.3s ease;
    }

    .modal-backdrop {
      backdrop-filter: blur(8px);
    }

    .risk-tag {
      transition: all 0.2s ease;
    }

    .risk-tag:hover {
      transform: translateY(-1px);
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    }

    .fb-info-section {
      background: linear-gradient(135deg, #eff6ff 0%, #dbeafe 100%);
      border: 1px solid #bfdbfe;
    }
  </style>
</head>
<body class="bg-gray-50">
  <div class="flex h-screen overflow-hidden">
    <!-- 侧边栏 -->
    <aside id="sidebar" class="bg-white w-64 min-h-screen shadow-lg transform transition-transform duration-300 ease-in-out lg:translate-x-0 lg:static lg:inset-0 mobile-menu-closed lg:mobile-menu-open fixed z-30">
      <!-- 侧边栏头部 -->
      <div class="flex items-center justify-center h-16 border-b border-gray-200">
        <div class="flex items-center">
          <div class="w-8 h-8 bg-gradient-to-r from-blue-600 to-purple-600 rounded-lg flex items-center justify-center">
            <i class="fas fa-chart-line text-white text-sm"></i>
          </div>
          <span class="ml-3 text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
            BestAds Admin
          </span>
        </div>
      </div>

      <!-- 侧边栏菜单区，支持滚动和树状折叠 -->
      <div id="sidebarMenuWrapper" class="overflow-y-auto" style="max-height:calc(100vh - 64px);">
        <nav>
          <!-- 主要功能 -->
          <div class="px-4 mb-6">
            <div class="flex items-center justify-between cursor-pointer group" onclick="toggleMenuSection('mainMenu')">
              <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 select-none">主要功能</h3>
              <i id="mainMenuArrow" class="fas fa-chevron-down text-xs text-gray-400 group-hover:text-blue-600 transition-transform"></i>
            </div>
            <ul id="mainMenu" class="space-y-1 mb-2">
              <li><a href="../main-functions/index.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-chart-bar w-5 h-5 mr-3 text-gray-400"></i>仪表盘</a></li>
              <li><a href="../main-functions/customer-management.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-users w-5 h-5 mr-3 text-gray-400"></i>客户管理</a></li>
            </ul>
          </div>
          <!-- FB业务管理 -->
          <div class="px-4 mb-6">
            <div class="flex items-center justify-between cursor-pointer group" onclick="toggleMenuSection('fbMenu')">
              <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 select-none">FB业务管理</h3>
              <i id="fbMenuArrow" class="fas fa-chevron-down text-xs text-gray-400 group-hover:text-blue-600 transition-transform"></i>
            </div>
            <ul id="fbMenu" class="space-y-1 mb-2">
              <li><a href="../fb-business/account-management.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-sync w-5 h-5 mr-3 text-gray-400"></i>账户管理</a></li>
              <li><a href="../fb-business/account-opening.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-plus-circle w-5 h-5 mr-3 text-gray-400"></i>开户管理</a></li>
              <li><a href="../fb-business/account-allocation.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-clipboard-list w-5 h-5 mr-3 text-gray-400"></i>账户分配</a></li>
              <li><a href="../fb-business/recharge-management.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-dollar-sign w-5 h-5 mr-3 text-gray-400"></i>账户充值</a></li>
              <li><a href="../fb-business/deduction-management.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-minus-circle w-5 h-5 mr-3 text-gray-400"></i>账户减款</a></li>
              <li><a href="../fb-business/clear-management.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-eraser w-5 h-5 mr-3 text-gray-400"></i>账户清零</a></li>
              <li><a href="../fb-business/service-fee-config.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-receipt w-5 h-5 mr-3 text-gray-400"></i>服务费配置</a></li>
            </ul>
          </div>
          <!-- 广告治理 -->
          <div class="px-4 mb-6">
            <div class="flex items-center justify-between cursor-pointer group" onclick="toggleMenuSection('adMenu')">
              <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 select-none">广告治理</h3>
              <i id="adMenuArrow" class="fas fa-chevron-down text-xs text-gray-400 group-hover:text-blue-600 transition-transform"></i>
            </div>
            <ul id="adMenu" class="space-y-1 mb-2">
              <li><a href="ad-review.html" class="sidebar-item active flex items-center px-4 py-2 text-sm font-medium text-gray-900 rounded-lg bg-gray-100"><i class="fas fa-shield-alt w-5 h-5 mr-3 text-gray-500"></i>广告审核</a></li>
            </ul>
          </div>
          <!-- 系统设置 -->
          <div class="px-4 mb-6">
            <div class="flex items-center justify-between cursor-pointer group" onclick="toggleMenuSection('sysMenu')">
              <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 select-none">系统设置</h3>
              <i id="sysMenuArrow" class="fas fa-chevron-down text-xs text-gray-400 group-hover:text-blue-600 transition-transform"></i>
            </div>
            <ul id="sysMenu" class="space-y-1 mb-2">
              <li><a href="#" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-cog w-5 h-5 mr-3 text-gray-400"></i>系统配置</a></li>
              <li><a href="#" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-user-cog w-5 h-5 mr-3 text-gray-400"></i>用户管理</a></li>
              <li><a href="../Log/permission-audit-log.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-file-alt w-5 h-5 mr-3 text-gray-400"></i>权限审计日志</a></li>
            </ul>
          </div>
          <!-- 客户流水 -->
          <div class="px-4 mb-6">
            <div class="flex items-center justify-between cursor-pointer group" onclick="toggleMenuSection('flowMenu')">
              <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 select-none">客户流水</h3>
              <i id="flowMenuArrow" class="fas fa-chevron-down text-xs text-gray-400 group-hover:text-blue-600 transition-transform"></i>
            </div>
            <ul id="flowMenu" class="space-y-1 mb-2">
              <li><a href="../customer-transactions/transaction-detail.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-receipt w-5 h-5 mr-3 text-gray-400"></i>交易明细</a></li>
              <li><a href="../customer-transactions/online-recharge.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-credit-card w-5 h-5 mr-3 text-gray-400"></i>在线充值</a></li>
              <li><a href="../customer-transactions/offline-transfer.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-university w-5 h-5 mr-3 text-gray-400"></i>线下转账</a></li>
            </ul>
          </div>
          <!-- 报表 -->
          <div class="px-4 mb-6">
            <div class="flex items-center justify-between cursor-pointer group" onclick="toggleMenuSection('reportMenu')">
              <h3 class="text-xs font-semibold text-gray-400 uppercase tracking-wider mb-3 select-none">报表</h3>
              <i id="reportMenuArrow" class="fas fa-chevron-down text-xs text-gray-400 group-hover:text-blue-600 transition-transform"></i>
            </div>
            <ul id="reportMenu" class="space-y-1 mb-2">
              <li><a href="../reports/customer-recharge-report.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-file-invoice-dollar w-5 h-5 mr-3 text-gray-400"></i>客户打款情况</a></li>
              <li><a href="../reports/account-recharge-report.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-file-invoice-dollar w-5 h-5 mr-3 text-gray-400"></i>广告账户充值报表</a></li>
              <li><a href="../reports/account-consume-report.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-chart-line w-5 h-5 mr-3 text-gray-400"></i>广告消耗情况</a></li>
              <li><a href="../reports/negative-ad-report.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-exclamation-triangle w-5 h-5 mr-3 text-gray-400"></i>负向广告报表</a></li>
              <li><a href="../reports/report1.html" class="sidebar-item flex items-center px-4 py-2 text-sm font-medium text-gray-600 rounded-lg hover:bg-gray-100 hover:text-gray-900"><i class="fas fa-trophy w-5 h-5 mr-3 text-yellow-400"></i>运营日报</a></li>
            </ul>
          </div>
        </nav>
      </div>
      <script>
        function toggleMenuSection(id) {
          const ul = document.getElementById(id);
          const arrow = document.getElementById(id + 'Arrow');
          if (ul.style.display === 'none') {
            ul.style.display = '';
            arrow.classList.remove('fa-chevron-right');
            arrow.classList.add('fa-chevron-down');
          } else {
            ul.style.display = 'none';
            arrow.classList.remove('fa-chevron-down');
            arrow.classList.add('fa-chevron-right');
          }
        }
      </script>
    </aside>

    <!-- 遮罩层 (移动端) -->
    <div id="sidebar-overlay" class="fixed inset-0 bg-gray-600 bg-opacity-50 opacity-0 hidden z-20 transition-opacity duration-300 ease-linear lg:hidden"></div>

    <!-- 主要内容区域 -->
    <div class="flex flex-col flex-1 overflow-hidden">
      <!-- 顶部栏 -->
      <header class="bg-white shadow-sm border-b border-gray-200">
        <div class="flex items-center justify-between h-16 px-4 sm:px-6 lg:px-8">
          <!-- 左侧 -->
          <div class="flex items-center">
            <button onclick="toggleSidebar()" class="lg:hidden p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-blue-500">
              <i class="fas fa-bars text-lg"></i>
            </button>
            
            <div class="ml-4 lg:ml-0">
              <nav class="flex space-x-2 text-sm" aria-label="Breadcrumb">
                <span class="text-gray-500">广告治理</span>
                <i class="fas fa-chevron-right text-gray-300 text-xs mt-0.5"></i>
                <span class="text-gray-900 font-medium">广告审核</span>
              </nav>
            </div>
          </div>
          
          <!-- 右侧 -->
          <div class="flex items-center space-x-4">
            <div class="relative">
              <button class="p-2 text-gray-400 hover:text-gray-500 relative">
                <i class="fas fa-bell text-lg"></i>
                <span class="absolute -top-1 -right-1 h-4 w-4 bg-red-500 rounded-full flex items-center justify-center text-xs text-white">3</span>
              </button>
            </div>
            
            <div class="flex items-center space-x-3">
              <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full flex items-center justify-center">
                <span class="text-white text-sm font-medium">A</span>
              </div>
              <span class="hidden md:block text-sm font-medium text-gray-700">管理员</span>
            </div>
          </div>
        </div>
      </header>

      <!-- 页面内容 -->
      <main class="flex-1 overflow-y-auto bg-gray-50">
        <div class="py-6">
          <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <!-- 页面标题和操作 -->
            <div class="mb-8 flex justify-between items-start">
              <div>
                <h1 class="text-2xl font-bold text-gray-900">广告审核管理</h1>
                <p class="mt-1 text-sm text-gray-500">监控和审核广告主广告内容，确保符合平台规则</p>
              </div>
              <div class="flex space-x-3">
                <button class="inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50">
                  <i class="fas fa-download mr-2"></i>
                  导出数据
                </button>
                <button class="inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700">
                  <i class="fas fa-sync-alt mr-2"></i>
                  刷新数据
                </button>
              </div>
            </div>

            <!-- 统计卡片 -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4 mb-8">
              <div class="bg-white overflow-hidden shadow-sm rounded-lg border">
                <div class="p-4">
                  <div class="flex items-center">
                    <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                      <i class="fas fa-robot text-green-600 text-lg"></i>
                    </div>
                    <div class="ml-3">
                      <p class="text-xs font-medium text-gray-500">机审通过</p>
                      <p class="text-xl font-bold text-gray-900">856</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="bg-white overflow-hidden shadow-sm rounded-lg border">
                <div class="p-4">
                  <div class="flex items-center">
                    <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                      <i class="fas fa-ban text-red-600 text-lg"></i>
                    </div>
                    <div class="ml-3">
                      <p class="text-xs font-medium text-gray-500">机审不通过</p>
                      <p class="text-xl font-bold text-gray-900">123</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="bg-white overflow-hidden shadow-sm rounded-lg border">
                <div class="p-4">
                  <div class="flex items-center">
                    <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                      <i class="fas fa-question-circle text-blue-600 text-lg"></i>
                    </div>
                    <div class="ml-3">
                      <p class="text-xs font-medium text-gray-500">机审待定</p>
                      <p class="text-xl font-bold text-gray-900">67</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="bg-white overflow-hidden shadow-sm rounded-lg border">
                <div class="p-4">
                  <div class="flex items-center">
                    <div class="w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center">
                      <i class="fas fa-user-check text-emerald-600 text-lg"></i>
                    </div>
                    <div class="ml-3">
                      <p class="text-xs font-medium text-gray-500">人审通过</p>
                      <p class="text-xl font-bold text-gray-900">1,234</p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="bg-white overflow-hidden shadow-sm rounded-lg border">
                <div class="p-4">
                  <div class="flex items-center">
                    <div class="w-10 h-10 bg-rose-100 rounded-lg flex items-center justify-center">
                      <i class="fas fa-user-times text-rose-600 text-lg"></i>
                    </div>
                    <div class="ml-3">
                      <p class="text-xs font-medium text-gray-500">人审不通过</p>
                      <p class="text-xl font-bold text-gray-900">89</p>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 筛选和搜索 -->
            <div class="bg-white p-6 rounded-lg shadow-sm border mb-8">
              <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-6 gap-4">
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">广告类型</label>
                  <select class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    <option value="">全部类型</option>
                    <option value="text+images">文本+多图</option>
                    <option value="text+video">文本+视频</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">审核状态</label>
                  <select id="statusFilter" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" onchange="filterByStatus()">
                    <option value="">全部状态</option>
                    <option value="auto-approved">机审通过</option>
                    <option value="auto-rejected">机审不通过</option>
                    <option value="auto-uncertain">机审待定</option>
                    <option value="manual-approved">人审通过</option>
                    <option value="manual-rejected">人审不通过</option>
                  </select>
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">广告主</label>
                  <input type="text" placeholder="搜索广告主..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">广告账户ID</label>
                  <input type="text" placeholder="Adaccount ID..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div>
                  <label class="block text-sm font-medium text-gray-700 mb-2">Campaign ID</label>
                  <input type="text" placeholder="Campaign ID..." class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                </div>
                <div class="flex items-end">
                  <button class="w-full bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 transition-colors">
                    <i class="fas fa-search mr-2"></i>搜索
                  </button>
                </div>
              </div>
            </div>

            <!-- 广告审核列表 -->
            <div id="reviewList" class="space-y-6">
              <!-- 机审待定广告示例1 - 文本+多图搭配 -->
              <div class="bg-white rounded-lg shadow-sm border review-card" data-status="auto-uncertain">
                <div class="p-6">
                  <div class="flex justify-between items-start mb-4">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-images text-blue-600"></i>
                      </div>
                      <div>
                        <h3 class="font-medium text-gray-900">文本+多图广告 #AD001</h3>
                        <p class="text-sm text-gray-500">广告主：张三科技 • 提交时间：2024-12-30 10:30 • 素材类型：文本+多图</p>
                      </div>
                    </div>
                    <span class="status-auto-uncertain px-3 py-1 rounded-full text-xs font-medium">机审待定</span>
                  </div>

                  <!-- FB广告层级信息 -->
                  <div class="fb-info-section p-4 rounded-lg mb-6">
                    <h4 class="font-medium text-gray-900 mb-3 flex items-center">
                      <i class="fab fa-facebook text-blue-600 mr-2"></i>
                      Facebook广告层级信息
                    </h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                      <div>
                        <span class="text-gray-600">广告账户ID:</span>
                        <p class="font-mono text-gray-900">act_123456789</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Campaign ID:</span>
                        <p class="font-mono text-gray-900">23847861234567890</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Adset ID:</span>
                        <p class="font-mono text-gray-900">23847861234567891</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Ad ID:</span>
                        <p class="font-mono text-gray-900">23847861234567892</p>
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- 广告内容 -->
                    <div class="lg:col-span-2">
                      <h4 class="font-medium text-gray-900 mb-2">广告内容</h4>
                      
                      <!-- 文本内容 -->
                      <div class="bg-gray-50 p-4 rounded-lg mb-4">
                        <h5 class="font-medium text-gray-800 mb-2 flex items-center">
                          <i class="fas fa-font text-gray-600 mr-2"></i>文本内容
                        </h5>
                        <p class="text-gray-800 mb-2 font-medium">标题：革命性智能手机，重新定义未来科技</p>
                        <p class="text-gray-600 text-sm">描述：体验前所未有的创新功能，超长续航，顶级拍照，现在购买享受限时优惠！立即行动，改变你的生活方式。</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                          <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">科技</span>
                          <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">手机</span>
                          <span class="bg-purple-100 text-purple-800 px-2 py-1 rounded text-xs">创新</span>
                        </div>
                      </div>

                      <!-- 图片内容 -->
                      <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-medium text-gray-800 mb-3 flex items-center">
                          <i class="fas fa-images text-gray-600 mr-2"></i>图片内容 (3张)
                        </h5>
                        <div class="grid grid-cols-3 gap-3">
                          <div class="relative">
                            <img src="https://images.unsplash.com/photo-1511707171634-5f897ff02aa9?w=200&h=150&fit=crop" alt="手机图片1" class="w-full h-24 object-cover rounded-lg">
                            <span class="absolute top-1 right-1 bg-black bg-opacity-60 text-white text-xs px-1 rounded">主图</span>
                          </div>
                          <div class="relative">
                            <img src="https://images.unsplash.com/photo-1512941937669-90a1b58e7e9c?w=200&h=150&fit=crop" alt="手机图片2" class="w-full h-24 object-cover rounded-lg">
                            <span class="absolute top-1 right-1 bg-black bg-opacity-60 text-white text-xs px-1 rounded">功能</span>
                          </div>
                          <div class="relative">
                            <img src="https://images.unsplash.com/photo-1567581935884-3349723552ca?w=200&h=150&fit=crop" alt="手机图片3" class="w-full h-24 object-cover rounded-lg">
                            <span class="absolute top-1 right-1 bg-black bg-opacity-60 text-white text-xs px-1 rounded">细节</span>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- 审核信息 -->
                    <div>
                      <h4 class="font-medium text-gray-900 mb-4">审核状态</h4>
                      <div class="bg-blue-50 p-4 rounded-lg mb-4">
                        <div class="flex items-center mb-2">
                          <i class="fas fa-robot text-blue-600 mr-2"></i>
                          <span class="text-sm font-medium text-blue-800">机器审核结果</span>
                        </div>
                        <p class="text-sm text-blue-700">当前状态：机审待定</p>
                      </div>

                      <!-- 分类审核标签 -->
                      <div class="mt-4">
                        <p class="text-sm text-gray-600 mb-3">检测到的违规标签：</p>
                        
                        <!-- 文本违规标签 -->
                        <div class="mb-3">
                          <p class="text-xs text-gray-500 mb-2 flex items-center">
                            <i class="fas fa-font text-gray-400 mr-1"></i>文本内容
                          </p>
                          <div class="flex flex-wrap gap-2">
                            <span class="risk-tag bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium border border-yellow-200">
                              <i class="fas fa-exclamation-triangle mr-1"></i>紧迫营销
                            </span>
                            <span class="risk-tag bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs font-medium border border-blue-200">
                              <i class="fas fa-gem mr-1"></i>稀缺性暗示
                            </span>
                          </div>
                        </div>

                        <!-- 图片违规标签 -->
                        <div class="mb-3">
                          <p class="text-xs text-gray-500 mb-2 flex items-center">
                            <i class="fas fa-images text-gray-400 mr-1"></i>图片内容
                          </p>
                          <div class="flex flex-wrap gap-2">
                            <span class="risk-tag bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium border border-green-200">
                              <i class="fas fa-check-circle mr-1"></i>内容正常
                            </span>
                          </div>
                        </div>
                      </div>
                      
                      <div class="mt-4">
                        <p class="text-sm text-gray-600 mb-2">审核建议：</p>
                        <p class="text-xs text-gray-500 bg-blue-50 p-2 rounded">涉及限量促销暗示，需要人工审核确认是否合规。</p>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 flex justify-between items-center">
                    <div class="flex space-x-2">
                      <button onclick="openManualReview('AD001')" class="bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700">
                        <i class="fas fa-user-edit mr-1"></i>人工审核
                      </button>
                    </div>
                    <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                      <i class="fas fa-eye mr-1"></i>查看详情
                    </button>
                  </div>
                </div>
              </div>

              <!-- 文本+视频广告示例 -->
              <div class="bg-white rounded-lg shadow-sm border review-card">
                <div class="p-6">
                  <div class="flex justify-between items-start mb-4">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-video text-green-600"></i>
                      </div>
                      <div>
                        <h3 class="font-medium text-gray-900">文本+视频广告 #AD002</h3>
                        <p class="text-sm text-gray-500">广告主：美食天堂 • 提交时间：2024-01-15 11:45 • 素材类型：文本+视频</p>
                      </div>
                    </div>
                    <span class="status-approved px-3 py-1 rounded-full text-xs font-medium">已通过</span>
                  </div>

                  <!-- FB广告层级信息 -->
                  <div class="fb-info-section p-4 rounded-lg mb-6">
                    <h4 class="font-medium text-gray-900 mb-3 flex items-center">
                      <i class="fab fa-facebook text-blue-600 mr-2"></i>
                      Facebook广告层级信息
                    </h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                      <div>
                        <span class="text-gray-600">广告账户ID:</span>
                        <p class="font-mono text-gray-900">act_987654321</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Campaign ID:</span>
                        <p class="font-mono text-gray-900">23847861234567893</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Adset ID:</span>
                        <p class="font-mono text-gray-900">23847861234567894</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Ad ID:</span>
                        <p class="font-mono text-gray-900">23847861234567895</p>
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- 广告内容 -->
                    <div class="lg:col-span-2">
                      <h4 class="font-medium text-gray-900 mb-2">广告内容</h4>
                      
                      <!-- 文本内容 -->
                      <div class="bg-gray-50 p-4 rounded-lg mb-4">
                        <h5 class="font-medium text-gray-800 mb-2 flex items-center">
                          <i class="fas fa-font text-gray-600 mr-2"></i>文本内容
                        </h5>
                        <p class="text-gray-800 mb-2 font-medium">标题：正宗川菜，地道美味</p>
                        <p class="text-gray-600 text-sm">描述：精选优质食材，传统工艺制作，让您品尝最地道的川菜风味。现在预订享受8折优惠！</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                          <span class="bg-red-100 text-red-800 px-2 py-1 rounded text-xs">美食</span>
                          <span class="bg-orange-100 text-orange-800 px-2 py-1 rounded text-xs">川菜</span>
                          <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded text-xs">餐饮</span>
                        </div>
                      </div>

                      <!-- 视频内容 -->
                      <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-medium text-gray-800 mb-3 flex items-center">
                          <i class="fas fa-video text-gray-600 mr-2"></i>视频内容
                        </h5>
                        <div class="relative">
                          <div class="w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center relative overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop" alt="川菜视频封面" class="w-full h-full object-cover">
                            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                              <i class="fas fa-play-circle text-white text-6xl"></i>
                            </div>
                            <span class="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded">1:30</span>
                          </div>
                          <p class="text-sm text-gray-600 mt-2">川菜制作过程展示视频</p>
                        </div>
                      </div>
                    </div>

                    <!-- 审核信息 -->
                    <div>
                      <h4 class="font-medium text-gray-900 mb-4">审核状态</h4>
                      <div class="bg-green-50 p-4 rounded-lg mb-4">
                        <div class="flex items-center mb-2">
                          <i class="fas fa-robot text-green-600 mr-2"></i>
                          <span class="text-sm font-medium text-green-700">机器审核结果</span>
                        </div>
                        <p class="text-sm text-green-700">当前状态：机审通过</p>
                        <p class="text-xs text-green-700 mt-1">审核时间：2024-01-15 14:20</p>
                      </div>

                      <!-- 分类审核标签 -->
                      <div class="mt-4">
                        <p class="text-sm text-gray-600 mb-3">检测到的违规标签：</p>
                        
                        <!-- 文本违规标签 -->
                        <div class="mb-3">
                          <p class="text-xs text-gray-500 mb-2 flex items-center">
                            <i class="fas fa-font text-gray-400 mr-1"></i>文本内容
                          </p>
                          <div class="flex flex-wrap gap-2">
                            <span class="risk-tag bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium border border-green-200">
                              <i class="fas fa-check-circle mr-1"></i>内容正常
                            </span>
                          </div>
                        </div>

                        <!-- 视频违规标签 -->
                        <div class="mb-3">
                          <p class="text-xs text-gray-500 mb-2 flex items-center">
                            <i class="fas fa-video text-gray-400 mr-1"></i>视频内容
                          </p>
                          <div class="flex flex-wrap gap-2">
                            <span class="risk-tag bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs font-medium border border-green-200">
                              <i class="fas fa-check-circle mr-1"></i>内容正常
                            </span>
                          </div>
                        </div>
                      </div>
                      
                      <div class="mt-4">
                        <p class="text-sm text-gray-600 mb-2">审核建议：</p>
                        <p class="text-xs text-gray-500 bg-green-50 p-2 rounded">内容符合规范，图片清晰，可以通过审核。</p>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 flex justify-between items-center">
                    <div class="text-sm text-gray-500">
                      <i class="fas fa-user mr-1"></i>审核人：李管理员 • 
                      <i class="fas fa-clock ml-2 mr-1"></i>审核时间：2024-01-15 14:20
                    </div>
                    <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">
                      <i class="fas fa-eye mr-1"></i>查看详情
                    </button>
                  </div>
                </div>
              </div>

              <!-- 文本+视频广告示例 (拒绝) -->
              <div class="bg-white rounded-lg shadow-sm border review-card">
                <div class="p-6">
                  <div class="flex justify-between items-start mb-4">
                    <div class="flex items-center space-x-3">
                      <div class="w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center">
                        <i class="fas fa-video text-red-600"></i>
                      </div>
                      <div>
                        <h3 class="font-medium text-gray-900">文本+视频广告 #AD003</h3>
                        <p class="text-sm text-gray-500">广告主：运动品牌 • 提交时间：2024-01-15 09:15 • 素材类型：文本+视频</p>
                      </div>
                    </div>
                    <span class="status-rejected px-3 py-1 rounded-full text-xs font-medium">已拒绝</span>
                  </div>

                  <!-- FB广告层级信息 -->
                  <div class="fb-info-section p-4 rounded-lg mb-6">
                    <h4 class="font-medium text-gray-900 mb-3 flex items-center">
                      <i class="fab fa-facebook text-blue-600 mr-2"></i>
                      Facebook广告层级信息
                    </h4>
                    <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                      <div>
                        <span class="text-gray-600">广告账户ID:</span>
                        <p class="font-mono text-gray-900">act_456789123</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Campaign ID:</span>
                        <p class="font-mono text-gray-900">23847861234567896</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Adset ID:</span>
                        <p class="font-mono text-gray-900">23847861234567897</p>
                      </div>
                      <div>
                        <span class="text-gray-600">Ad ID:</span>
                        <p class="font-mono text-gray-900">23847861234567898</p>
                      </div>
                    </div>
                  </div>

                  <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                    <!-- 广告内容 -->
                    <div class="lg:col-span-2">
                      <h4 class="font-medium text-gray-900 mb-2">广告内容</h4>
                      
                      <!-- 文本内容 -->
                      <div class="bg-gray-50 p-4 rounded-lg mb-4">
                        <h5 class="font-medium text-gray-800 mb-2 flex items-center">
                          <i class="fas fa-font text-gray-600 mr-2"></i>文本内容
                        </h5>
                        <p class="text-gray-800 mb-2 font-medium">标题：突破极限，成就不凡</p>
                        <p class="text-gray-600 text-sm">描述：专业运动装备，助您挑战每一个不可能。独家技术，卓越品质，现在购买立享5折优惠！</p>
                        <div class="mt-3 flex flex-wrap gap-2">
                          <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded text-xs">运动</span>
                          <span class="bg-gray-100 text-gray-800 px-2 py-1 rounded text-xs">装备</span>
                          <span class="bg-green-100 text-green-800 px-2 py-1 rounded text-xs">健身</span>
                        </div>
                      </div>

                      <!-- 视频内容 -->
                      <div class="bg-gray-50 p-4 rounded-lg">
                        <h5 class="font-medium text-gray-800 mb-3 flex items-center">
                          <i class="fas fa-video text-gray-600 mr-2"></i>视频内容
                        </h5>
                        <div class="relative">
                          <div class="w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center relative overflow-hidden">
                            <img src="https://images.unsplash.com/photo-1541534741688-6078c6bfb5c5?w=400&h=300&fit=crop" alt="运动视频封面" class="w-full h-full object-cover">
                            <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                              <i class="fas fa-play-circle text-white text-6xl"></i>
                            </div>
                            <span class="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded">0:30</span>
                          </div>
                          <p class="text-sm text-gray-600 mt-2">运动装备展示视频</p>
                        </div>
                      </div>
                    </div>

                    <!-- 审核信息 -->
                    <div>
                      <h4 class="font-medium text-gray-900 mb-4">审核状态</h4>
                      <div class="bg-red-50 p-4 rounded-lg mb-4">
                        <div class="flex items-center mb-2">
                          <i class="fas fa-robot text-red-600 mr-2"></i>
                          <span class="text-sm font-medium text-red-700">机器审核结果</span>
                        </div>
                        <p class="text-sm text-red-700">当前状态：机审不通过</p>
                        <p class="text-xs text-red-700 mt-1">审核时间：2024-01-15 12:30</p>
                      </div>

                      <!-- 分类审核标签 -->
                      <div class="mt-4">
                        <p class="text-sm text-gray-600 mb-3">检测到的违规标签：</p>
                        
                        <!-- 文本违规标签 -->
                        <div class="mb-3">
                          <p class="text-xs text-gray-500 mb-2 flex items-center">
                            <i class="fas fa-font text-gray-400 mr-1"></i>文本内容
                          </p>
                          <div class="flex flex-wrap gap-2">
                            <span class="risk-tag bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium border border-red-200">
                              <i class="fas fa-ban mr-1"></i>虚假宣传
                            </span>
                            <span class="risk-tag bg-orange-100 text-orange-800 px-2 py-1 rounded-full text-xs font-medium border border-orange-200">
                              <i class="fas fa-exclamation-triangle mr-1"></i>夸大效果
                            </span>
                            <span class="risk-tag bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs font-medium border border-yellow-200">
                              <i class="fas fa-dollar-sign mr-1"></i>误导定价
                            </span>
                          </div>
                        </div>

                        <!-- 视频违规标签 -->
                        <div class="mb-3">
                          <p class="text-xs text-gray-500 mb-2 flex items-center">
                            <i class="fas fa-video text-gray-400 mr-1"></i>视频内容
                          </p>
                          <div class="flex flex-wrap gap-2">
                            <span class="risk-tag bg-purple-100 text-purple-800 px-2 py-1 rounded-full text-xs font-medium border border-purple-200">
                              <i class="fas fa-heart mr-1"></i>健康声明
                            </span>
                            <span class="risk-tag bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs font-medium border border-red-200">
                              <i class="fas fa-ban mr-1"></i>误导演示
                            </span>
                          </div>
                        </div>
                      </div>
                      
                      <div class="mt-4">
                        <p class="text-sm text-gray-600 mb-2">拒绝原因：</p>
                        <p class="text-xs text-gray-500 bg-red-50 p-2 rounded">视频中包含夸大不实宣传内容，存在误导消费者的风险，需要重新制作。</p>
                      </div>
                    </div>
                  </div>

                  <div class="mt-6 flex justify-between items-center">
                    <div class="flex space-x-2">
                      <button class="bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700">
                        <i class="fas fa-envelope mr-1"></i>通知广告主
                      </button>
                      <button class="bg-gray-600 text-white px-4 py-2 rounded-md text-sm hover:bg-gray-700">
                        <i class="fas fa-redo mr-1"></i>重新审核
                      </button>
                    </div>
                    <div class="text-sm text-gray-500">
                      <i class="fas fa-user mr-1"></i>审核人：王管理员 • 
                      <i class="fas fa-clock ml-2 mr-1"></i>审核时间：2024-01-15 12:30
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 分页 -->
            <div class="mt-8 flex items-center justify-between">
              <div class="text-sm text-gray-700">
                显示 <span class="font-medium">1</span> 到 <span class="font-medium">10</span> 条，共 <span class="font-medium">127</span> 条记录
              </div>
              <div class="flex space-x-2">
                <button class="px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-500 hover:bg-gray-50">上一页</button>
                <button class="px-3 py-2 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700">1</button>
                <button class="px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50">2</button>
                <button class="px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50">3</button>
                <button class="px-3 py-2 border border-gray-300 rounded-md text-sm text-gray-700 hover:bg-gray-50">下一页</button>
              </div>
            </div>
          </div>
        </div>
      </main>
    </div>
  </div>

  <!-- 详情模态框 -->
  <div id="detailModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 modal-backdrop z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-6xl w-full max-h-screen overflow-y-auto">
        <div class="p-6">
          <!-- 模态框头部 -->
          <div class="flex justify-between items-center mb-6">
            <div>
              <h2 id="detailModalTitle" class="text-xl font-bold text-gray-900">广告详情审核</h2>
              <p id="detailModalSubtitle" class="text-sm text-gray-500 mt-1">查看完整的广告信息和审核记录</p>
            </div>
            <button onclick="closeModal()" class="text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-full p-2">
              <i class="fas fa-times text-xl"></i>
            </button>
          </div>

          <!-- 标签页导航 -->
          <div class="border-b border-gray-200 mb-6">
            <nav class="flex space-x-8">
              <button onclick="switchDetailTab('content')" id="contentTab" class="py-2 px-1 border-b-2 border-blue-500 text-blue-600 font-medium text-sm whitespace-nowrap">
                <i class="fas fa-file-alt mr-2"></i>广告内容
              </button>
              <button onclick="switchDetailTab('review')" id="reviewTab" class="py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap">
                <i class="fas fa-clipboard-check mr-2"></i>审核记录
              </button>
              <button onclick="switchDetailTab('system')" id="systemTab" class="py-2 px-1 border-b-2 border-transparent text-gray-500 hover:text-gray-700 font-medium text-sm whitespace-nowrap">
                <i class="fas fa-cog mr-2"></i>系统记录
              </button>
            </nav>
          </div>

          <!-- 标签页内容 -->
          <div id="detailContent">
            <!-- 广告内容标签页 -->
            <div id="contentPanel" class="tab-panel">
              <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
                <!-- 左侧：基础信息和Facebook信息 -->
                <div class="space-y-6">
                  <!-- 基础信息 -->
                  <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                      <i class="fas fa-info-circle text-blue-600 mr-2"></i>基础信息
                    </h3>
                    <div id="basicInfo" class="space-y-3">
                      <!-- 动态填充 -->
                    </div>
                  </div>

                  <!-- Facebook广告层级信息 -->
                  <div class="bg-blue-50 p-6 rounded-lg border border-blue-200">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                      <i class="fab fa-facebook text-blue-600 mr-2"></i>Facebook广告层级
                    </h3>
                    <div id="fbLevelInfo" class="space-y-3">
                      <!-- 动态填充 -->
                    </div>
                  </div>

                  <!-- 审核状态详情 -->
                  <div class="bg-gray-50 p-6 rounded-lg">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                      <i class="fas fa-clipboard-check text-blue-600 mr-2"></i>审核状态详情
                    </h3>
                    <div id="scoreDetails" class="space-y-4">
                      <!-- 动态填充 -->
                    </div>
                  </div>
                </div>

                <!-- 右侧：广告内容展示 -->
                <div class="space-y-6">
                  <!-- 广告文本内容 -->
                  <div class="bg-white border-2 border-gray-200 p-6 rounded-lg">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                      <i class="fas fa-font text-purple-600 mr-2"></i>文本内容
                    </h3>
                    <div id="textContent">
                      <!-- 动态填充 -->
                    </div>
                  </div>

                  <!-- 广告媒体内容 -->
                  <div class="bg-white border-2 border-gray-200 p-6 rounded-lg">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                      <i id="mediaIcon" class="fas fa-images text-green-600 mr-2"></i>
                      <span id="mediaTitle">媒体内容</span>
                    </h3>
                    <div id="mediaContent">
                      <!-- 动态填充 -->
                    </div>
                  </div>

                  <!-- 风险标签详情 -->
                  <div class="bg-yellow-50 border-2 border-yellow-200 p-6 rounded-lg">
                    <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                      <i class="fas fa-exclamation-triangle text-yellow-600 mr-2"></i>风险检测结果
                    </h3>
                    <div id="riskTagsDetails">
                      <!-- 动态填充 -->
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- 审核记录标签页 -->
            <div id="reviewPanel" class="tab-panel hidden">
              <div class="space-y-6">
                <!-- 审核时间线 -->
                <div class="bg-white border rounded-lg p-6">
                  <h3 class="text-lg font-medium text-gray-900 mb-6 flex items-center">
                    <i class="fas fa-history text-blue-600 mr-2"></i>审核时间线
                  </h3>
                  <div id="reviewTimeline" class="space-y-4">
                    <!-- 动态填充 -->
                  </div>
                </div>

                <!-- 详细审核记录 -->
                <div class="bg-gray-50 border rounded-lg p-6">
                  <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                    <i class="fas fa-clipboard-list text-green-600 mr-2"></i>详细审核记录
                  </h3>
                  <div id="detailedReviewRecords">
                    <!-- 动态填充 -->
                  </div>
                </div>
              </div>
            </div>

            <!-- 系统记录标签页 -->
            <div id="systemPanel" class="tab-panel hidden">
              <div class="space-y-6">
                <!-- 系统操作记录 -->
                <div class="bg-white border rounded-lg p-6">
                  <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                    <i class="fas fa-server text-gray-600 mr-2"></i>系统操作记录
                  </h3>
                  <div id="systemOperations">
                    <!-- 动态填充 -->
                  </div>
                </div>

                <!-- 客户通知记录 -->
                <div class="bg-blue-50 border border-blue-200 rounded-lg p-6">
                  <h3 class="text-lg font-medium text-gray-900 mb-4 flex items-center">
                    <i class="fas fa-bell text-blue-600 mr-2"></i>客户通知记录
                  </h3>
                  <div id="customerNotifications">
                    <!-- 动态填充 -->
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- 模态框底部操作 -->
          <div class="mt-8 pt-6 border-t border-gray-200 flex justify-between items-center">
            <div class="text-sm text-gray-500">
              <i class="fas fa-clock mr-1"></i>
              最后更新：<span id="lastUpdateTime">--</span>
            </div>
            <div class="flex space-x-3">
              <button onclick="closeModal()" class="px-4 py-2 bg-gray-300 text-gray-700 rounded-md hover:bg-gray-400 transition-colors">
                关闭
              </button>
              <button onclick="openManualReviewFromDetail()" id="detailManualReviewBtn" class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors hidden">
                <i class="fas fa-user-edit mr-2"></i>人工审核
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- 人工审核模态框 -->
  <div id="manualReviewModal" class="hidden fixed inset-0 bg-gray-600 bg-opacity-50 modal-backdrop z-50">
    <div class="flex items-center justify-center min-h-screen p-4">
      <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full max-h-screen overflow-y-auto">
        <div class="p-6">
          <div class="flex justify-between items-center mb-6">
            <h2 class="text-xl font-bold text-gray-900">人工审核</h2>
            <button onclick="closeManualReviewModal()" class="text-gray-400 hover:text-gray-600">
              <i class="fas fa-times text-xl"></i>
            </button>
          </div>
          
          <!-- 审核结果选择 -->
          <div class="mb-6">
            <p class="text-gray-600 mb-4">请选择人工审核结果：</p>
            <div class="space-y-3">
              <label class="flex items-center">
                <input type="radio" name="manualResult" value="approved" class="mr-3" onchange="toggleReviewOptions()">
                <span class="text-green-600"><i class="fas fa-check-circle mr-2"></i>通过</span>
              </label>
              <label class="flex items-center">
                <input type="radio" name="manualResult" value="rejected" class="mr-3" onchange="toggleReviewOptions()">
                <span class="text-red-600"><i class="fas fa-times-circle mr-2"></i>不通过</span>
              </label>
            </div>
          </div>

          <!-- 通过时的简单确认 -->
          <div id="approvedSection" class="hidden mb-6">
            <div class="bg-green-50 p-4 rounded-lg">
              <p class="text-green-800 text-sm">
                <i class="fas fa-check-circle mr-2"></i>
                确认通过该广告，广告将正式上线投放。
              </p>
            </div>
          </div>

          <!-- 不通过时的详细选项 -->
          <div id="rejectedSection" class="hidden space-y-6 mb-6">
            <!-- 基础信息区域 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
              <!-- 不通过理由 -->
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">不通过理由 <span class="text-red-500">*</span></label>
                <textarea id="rejectionReason" rows="4" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-red-500" placeholder="请详细说明广告不通过的具体原因..."></textarea>
              </div>

              <!-- 是否通知客户 -->
              <div class="bg-blue-50 p-4 rounded-lg">
                <label class="flex items-start">
                  <input type="checkbox" id="notifyCustomer" class="mt-1 mr-3">
                  <div>
                    <span class="text-blue-800 font-medium">通知客户</span>
                    <p class="text-blue-700 text-sm mt-1">向广告主发送审核不通过的站内信通知</p>
                  </div>
                </label>
              </div>
            </div>

            <!-- Badcase反馈区域 -->
            <div class="bg-orange-50 p-4 rounded-lg">
              <div class="flex items-center justify-between mb-4">
                <h4 class="text-orange-800 font-medium">Badcase反馈内容</h4>
                <button type="button" onclick="addBadcaseFeedback()" class="text-orange-600 hover:text-orange-800 text-sm font-medium">
                  <i class="fas fa-plus mr-1"></i>添加反馈
                </button>
              </div>
              <div id="badcaseFeedbackList" class="space-y-4">
                <!-- 动态添加的反馈项目 -->
              </div>
            </div>
          </div>

          <!-- 操作按钮 -->
          <div class="flex space-x-3">
            <button onclick="closeManualReviewModal()" class="flex-1 bg-gray-300 text-gray-700 px-4 py-2 rounded-md hover:bg-gray-400">
              取消
            </button>
            <button onclick="submitManualReview()" class="flex-1 bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
              确认提交
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    // 当前正在审核的广告ID
    let currentReviewAdId = null;
    
    // Badcase反馈数据
    let badcaseFeedbacks = [];

    // 广告数据
    const adData = [
      {
        id: 'AD001',
        title: '文本+多图广告 #AD001',
        customer: '张三科技',
        submitTime: '2024-12-30 10:30',
        status: 'auto-uncertain',
        type: 'text+images',
        content: {
          text: {
            title: '时尚潮流，引领风尚',
            description: '最新款设计师作品，限量发售，错过再等一年！现在下单享受早鸟优惠。',
            tags: ['时尚', '潮流', '设计']
          },
          images: [
            { url: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=200&h=150&fit=crop', label: '主图' },
            { url: 'https://images.unsplash.com/photo-1445205170230-053b83016050?w=200&h=150&fit=crop', label: '细节' },
            { url: 'https://images.unsplash.com/photo-1483985988355-763728e1935b?w=200&h=150&fit=crop', label: '搭配' }
          ]
        },
        fbInfo: {
          adAccount: 'act_123456789',
          campaignId: '23847861234567890',
          adsetId: '23847861234567891',
          adId: '23847861234567892'
        },
        scores: { compliance: 75, quality: 82, risk: 30 },
        riskTags: {
          text: ['紧迫营销', '稀缺性暗示'],
          images: ['内容正常']
        },
        suggestion: '涉及限量促销暗示，需要人工审核确认是否合规。',
        reviewer: '机器审核',
        reviewTime: '2024-12-30 10:45'
      },
      {
        id: 'AD002',
        title: '文本+视频广告 #AD002',
        customer: '美食天堂',
        submitTime: '2024-12-30 09:15',
        status: 'auto-approved',
        type: 'text+video',
        content: {
          text: {
            title: '正宗川菜，地道美味',
            description: '精选优质食材，传统工艺制作，让您品尝最地道的川菜风味。现在预订享受8折优惠！',
            tags: ['美食', '川菜', '餐饮']
          },
          video: {
            url: 'https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=400&h=300&fit=crop',
            duration: '1:30',
            description: '川菜制作过程展示视频'
          }
        },
        fbInfo: {
          adAccount: 'act_987654321',
          campaignId: '23847861234567893',
          adsetId: '23847861234567894',
          adId: '23847861234567895'
        },
        scores: { compliance: 92, quality: 89, risk: 10 },
        riskTags: {
          text: ['内容正常'],
          video: ['内容正常']
        },
        suggestion: '内容符合规范，视频清晰，可以通过审核。',
        reviewer: '机器审核',
        reviewTime: '2024-12-30 14:20'
      },
      {
        id: 'AD003',
        title: '文本+视频广告 #AD003',
        customer: '运动品牌',
        submitTime: '2024-12-30 11:45',
        status: 'auto-rejected',
        type: 'text+video',
        content: {
          text: {
            title: '突破极限，成就不凡',
            description: '专业运动装备，助您挑战每一个不可能。独家技术，卓越品质，现在购买立享5折优惠！',
            tags: ['运动', '装备', '健身']
          },
          video: {
            url: 'https://images.unsplash.com/photo-1541534741688-6078c6bfb5c5?w=400&h=300&fit=crop',
            duration: '0:30',
            description: '运动装备展示视频'
          }
        },
        fbInfo: {
          adAccount: 'act_456789123',
          campaignId: '23847861234567896',
          adsetId: '23847861234567897',
          adId: '23847861234567898'
        },
        scores: { compliance: 45, quality: 78, risk: 85 },
        riskTags: {
          text: ['虚假宣传', '夸大效果', '误导定价'],
          video: ['健康声明', '误导演示']
        },
        suggestion: '文本和视频中包含夸大不实宣传内容，存在误导消费者的风险，需要重新制作。',
        reviewer: '机器审核',
        reviewTime: '2024-12-30 12:30'
      },
      {
        id: 'AD004',
        title: '文本+多图广告 #AD004',
        customer: '健康生活馆',
        submitTime: '2024-12-30 08:30',
        status: 'auto-approved',
        type: 'text+images',
        content: {
          text: {
            title: '天然有机蔬果，健康生活首选',
            description: '新鲜采摘，无农药残留，为您和家人提供最安全的营养保障。',
            tags: ['健康', '有机', '蔬果']
          },
          images: [
            { url: 'https://images.unsplash.com/photo-1540420773420-3366772f4999?w=200&h=150&fit=crop', label: '主图' },
            { url: 'https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?w=200&h=150&fit=crop', label: '产品' },
            { url: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=200&h=150&fit=crop', label: '细节' }
          ]
        },
        fbInfo: {
          adAccount: 'act_345678901',
          campaignId: '23847861234567902',
          adsetId: '23847861234567903',
          adId: '23847861234567904'
        },
        scores: { compliance: 95, quality: 92, risk: 5 },
        riskTags: {
          text: ['内容正常'],
          images: ['内容正常']
        },
        suggestion: '内容真实可信，图片质量优秀，符合平台规范。',
        reviewer: '机器审核',
        reviewTime: '2024-12-30 13:15'
      },
      {
        id: 'AD005',
        title: '文本+视频广告 #AD005',
        customer: '保健品公司',
        submitTime: '2024-12-30 09:15',
        status: 'auto-rejected',
        type: 'text+video',
        content: {
          text: {
            title: '神奇保健品，包治百病',
            description: '经过特殊工艺提取，能够有效治疗各种疾病，无副作用，立竿见影！',
            tags: ['保健品', '治疗', '健康']
          },
          video: {
            url: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=400&h=300&fit=crop',
            duration: '1:15',
            description: '保健品功效展示视频'
          }
        },
        fbInfo: {
          adAccount: 'act_567890234',
          campaignId: '23847861234567905',
          adsetId: '23847861234567906',
          adId: '23847861234567907'
        },
        scores: { compliance: 25, quality: 60, risk: 95 },
        riskTags: {
          text: ['虚假宣传', '医疗声明', '夸大效果'],
          video: ['违规保健品', '误导演示']
        },
        suggestion: '严重违反广告法规，涉及虚假医疗声明，必须拒绝。',
        reviewer: '机器审核',
        reviewTime: '2024-12-30 11:00'
      },
      {
        id: 'AD006',
        title: '文本+多图广告 #AD006',
        customer: '时尚品牌',
        submitTime: '2024-12-30 07:45',
        status: 'auto-uncertain',
        type: 'text+images',
        content: {
          text: {
            title: '时尚潮流，引领风尚',
            description: '最新款设计师作品，限量发售，错过再等一年！现在下单享受早鸟优惠。',
            tags: ['时尚', '潮流', '设计']
          },
          images: [
            { url: 'https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=200&h=150&fit=crop', label: '主图' },
            { url: 'https://images.unsplash.com/photo-1445205170230-053b83016050?w=200&h=150&fit=crop', label: '细节' },
            { url: 'https://images.unsplash.com/photo-1483985988355-763728e1935b?w=200&h=150&fit=crop', label: '搭配' }
          ]
        },
        fbInfo: {
          adAccount: 'act_678901345',
          campaignId: '23847861234567908',
          adsetId: '23847861234567909',
          adId: '23847861234567910'
        },
        scores: { compliance: 75, quality: 82, risk: 30 },
        riskTags: {
          text: ['紧迫营销', '稀缺性暗示'],
          images: ['内容正常']
        },
        suggestion: '涉及限量促销暗示，需要人工审核确认是否合规。',
        reviewer: '机器审核',
        reviewTime: '2024-12-30 10:45'
      },
      {
        id: 'AD007',
        title: '文本+视频广告 #AD007',
        customer: '教育培训',
        submitTime: '2024-12-30 06:20',
        status: 'auto-uncertain',
        type: 'text+video',
        content: {
          text: {
            title: '在线教育课程，提升职场竞争力',
            description: '名师授课，系统学习，帮助您快速掌握专业技能，轻松获得高薪工作。',
            tags: ['教育', '培训', '职场']
          },
          video: {
            url: 'https://images.unsplash.com/photo-1522202176988-66273c2fd55f?w=400&h=300&fit=crop',
            duration: '2:00',
            description: '在线教育课程介绍视频'
          }
        },
        fbInfo: {
          adAccount: 'act_789012345',
          campaignId: '23847861234567911',
          adsetId: '23847861234567912',
          adId: '23847861234567913'
        },
        scores: { compliance: 75, quality: 82, risk: 30 },
        riskTags: {
          text: ['就业承诺', '收益暗示'],
          video: ['内容正常']
        },
        suggestion: '内容涉及就业承诺，需要人工审核确认是否合规。',
        reviewer: '机器审核',
        reviewTime: '2024-12-30 10:45'
      },
      {
        id: 'AD008',
        title: '文本+多图广告 #AD008',
        customer: '金融服务',
        submitTime: '2024-12-30 05:30',
        status: 'auto-uncertain',
        type: 'text+images',
        content: {
          text: {
            title: '投资理财，稳定收益',
            description: '专业团队管理，年化收益率高达15%，低风险高回报，值得信赖的理财选择。',
            tags: ['金融', '投资', '理财']
          },
          images: [
            { url: 'https://images.unsplash.com/photo-1579621970563-ebec7560ff3e?w=200&h=150&fit=crop', label: '主图' },
            { url: 'https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=200&h=150&fit=crop', label: '数据' },
            { url: 'https://images.unsplash.com/photo-1450101499163-c8848c66ca85?w=200&h=150&fit=crop', label: '团队' }
          ]
        },
        fbInfo: {
          adAccount: 'act_890123456',
          campaignId: '23847861234567914',
          adsetId: '23847861234567915',
          adId: '23847861234567916'
        },
        scores: { compliance: 65, quality: 88, risk: 55 },
        riskTags: {
          text: ['收益承诺', '金融风险'],
          images: ['内容正常']
        },
        suggestion: '涉及具体收益承诺，需要核实相关资质和合规性。',
        reviewer: '机器审核',
        reviewTime: '2024-12-30 09:30'
      },
      {
        id: 'AD009',
        title: '文本+视频广告 #AD009',
        customer: '旅游公司',
        submitTime: '2024-12-29 16:20',
        status: 'manual-approved',
        type: 'text+video',
        content: {
          text: {
            title: '梦幻海岛游，体验paradise',
            description: '精心安排的海岛之旅，享受阳光沙滩，品尝当地美食，留下美好回忆。',
            tags: ['旅游', '海岛', '度假']
          },
          video: {
            url: 'https://images.unsplash.com/photo-1506905925346-21bda4d32df4?w=400&h=300&fit=crop',
            duration: '1:45',
            description: '海岛旅游风光展示视频'
          }
        },
        fbInfo: {
          adAccount: 'act_901234567',
          campaignId: '23847861234567917',
          adsetId: '23847861234567918',
          adId: '23847861234567919'
        },
        scores: { compliance: 88, quality: 85, risk: 15 },
        riskTags: {
          text: ['内容正常'],
          video: ['内容正常']
        },
        suggestion: '内容真实可信，符合旅游广告规范，可以通过。',
        reviewer: '王管理员',
        reviewTime: '2024-12-29 18:45',
        manualNote: '经核实，旅游产品真实存在，价格合理，通过审核。'
      },
      {
        id: 'AD010',
        title: '文本+多图广告 #AD010',
        customer: '美容机构',
        submitTime: '2024-12-29 15:10',
        status: 'manual-approved',
        type: 'text+images',
        content: {
          text: {
            title: '专业美容护理，焕发肌肤活力',
            description: '采用先进设备和专业技术，为您提供个性化美容方案，让肌肤重现年轻光彩。',
            tags: ['美容', '护理', '肌肤']
          },
          images: [
            { url: 'https://images.unsplash.com/photo-1515377905703-c4788e51af15?w=200&h=150&fit=crop', label: '主图' },
            { url: 'https://images.unsplash.com/photo-1487412720507-e7ab37603c6f?w=200&h=150&fit=crop', label: '设备' },
            { url: 'https://images.unsplash.com/photo-1616683693504-3ea7e9ad6fec?w=200&h=150&fit=crop', label: '效果' }
          ]
        },
        fbInfo: {
          adAccount: 'act_012345678',
          campaignId: '23847861234567920',
          adsetId: '23847861234567921',
          adId: '23847861234567922'
        },
        scores: { compliance: 90, quality: 87, risk: 20 },
        riskTags: {
          text: ['内容正常'],
          images: ['内容正常']
        },
        suggestion: '美容服务描述适当，无夸大宣传，符合行业规范。',
        reviewer: '李管理员',
        reviewTime: '2024-12-29 17:30',
        manualNote: '已核实美容机构资质，服务描述真实，通过审核。'
      },
      {
        id: 'AD011',
        title: '文本+多图广告 #AD011',
        customer: '减肥产品',
        submitTime: '2024-12-29 14:30',
        status: 'manual-rejected',
        type: 'text+images',
        content: {
          text: {
            title: '7天瘦20斤，不反弹！',
            description: '独家配方，无需节食运动，轻松实现快速减肥，效果显著，安全无副作用！',
            tags: ['减肥', '瘦身', '产品']
          },
          images: [
            { url: 'https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=200&h=150&fit=crop', label: '主图' },
            { url: 'https://images.unsplash.com/photo-1506629905592-5665e11ad34e?w=200&h=150&fit=crop', label: '对比' },
            { url: 'https://images.unsplash.com/photo-1559757148-5c350d0d3c56?w=200&h=150&fit=crop', label: '产品' }
          ]
        },
        fbInfo: {
          adAccount: 'act_123456789',
          campaignId: '23847861234567923',
          adsetId: '23847861234567924',
          adId: '23847861234567925'
        },
        scores: { compliance: 30, quality: 75, risk: 90 },
        riskTags: {
          text: ['虚假宣传', '夸大效果', '医疗声明'],
          images: ['健康风险', '误导对比']
        },
        suggestion: '严重夸大减肥效果，涉及虚假医疗声明，存在健康风险。',
        reviewer: '张管理员',
        reviewTime: '2024-12-29 16:15',
        manualNote: '经专家评估，减肥效果描述严重不实，可能误导消费者，拒绝通过。'
      },
      {
        id: 'AD012',
        title: '文本+视频广告 #AD012',
        customer: '加密货币',
        submitTime: '2024-12-29 13:45',
        status: 'manual-rejected',
        type: 'text+video',
        content: {
          text: {
            title: '投资数字货币，月入百万不是梦',
            description: '把握时机，投资新兴数字货币，短期内实现财富自由，成功案例遍布全球！',
            tags: ['投资', '数字货币', '理财']
          },
          video: {
            url: 'https://images.unsplash.com/photo-1611974789855-9c2a0a7236a3?w=400&h=300&fit=crop',
            duration: '1:20',
            description: '数字货币投资案例展示视频'
          }
        },
        fbInfo: {
          adAccount: 'act_234567890',
          campaignId: '23847861234567926',
          adsetId: '23847861234567927',
          adId: '23847861234567928'
        },
        scores: { compliance: 20, quality: 70, risk: 95 },
        riskTags: {
          text: ['虚假宣传', '金融欺诈', '收益承诺'],
          video: ['违规投资', '误导演示']
        },
        suggestion: '涉嫌金融欺诈，严重违反投资广告规范，必须拒绝。',
        reviewer: '陈管理员',
        reviewTime: '2024-12-29 15:20',
        manualNote: '加密货币投资风险极高，收益承诺不实，涉嫌诈骗，坚决拒绝。'
      }
    ];

    // 渲染广告列表
    function renderAdList(filterStatus = '') {
      const reviewList = document.getElementById('reviewList');
      const filteredAds = filterStatus ? adData.filter(ad => ad.status === filterStatus) : adData;
      
      reviewList.innerHTML = filteredAds.map(ad => `
        <div class="bg-white rounded-lg shadow-sm border review-card" data-status="${ad.status}">
          <div class="p-6">
            <div class="flex justify-between items-start mb-4">
              <div class="flex items-center space-x-3">
                <div class="w-10 h-10 ${getIconBgColor(ad.type)} rounded-lg flex items-center justify-center">
                  <i class="${getIconClass(ad.type)} ${getIconColor(ad.type)}"></i>
                </div>
                                        <div>
                          <h3 class="font-medium text-gray-900">${ad.title}</h3>
                          <p class="text-sm text-gray-500">广告主：${ad.customer} • 提交时间：${ad.submitTime} • 素材类型：${ad.type === 'text+images' ? '文本+多图' : '文本+视频'}</p>
                        </div>
              </div>
              <span class="status-${ad.status.replace('-', '-')} px-3 py-1 rounded-full text-xs font-medium">${getStatusText(ad.status)}</span>
            </div>

            <!-- FB广告层级信息 -->
            <div class="fb-info-section p-4 rounded-lg mb-6">
              <h4 class="font-medium text-gray-900 mb-3 flex items-center">
                <i class="fab fa-facebook text-blue-600 mr-2"></i>
                Facebook广告层级信息
              </h4>
              <div class="grid grid-cols-2 md:grid-cols-4 gap-4 text-sm">
                <div>
                  <span class="text-gray-600">广告账户ID:</span>
                  <p class="font-mono text-gray-900">${ad.fbInfo.adAccount}</p>
                </div>
                <div>
                  <span class="text-gray-600">Campaign ID:</span>
                  <p class="font-mono text-gray-900">${ad.fbInfo.campaignId}</p>
                </div>
                <div>
                  <span class="text-gray-600">Adset ID:</span>
                  <p class="font-mono text-gray-900">${ad.fbInfo.adsetId}</p>
                </div>
                <div>
                  <span class="text-gray-600">Ad ID:</span>
                  <p class="font-mono text-gray-900">${ad.fbInfo.adId}</p>
                </div>
              </div>
            </div>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
              <!-- 广告内容 -->
              <div class="lg:col-span-2">
                <h4 class="font-medium text-gray-900 mb-2">广告内容</h4>
                <div class="bg-gray-50 p-4 rounded-lg">
                  ${renderAdContent(ad)}
                </div>
              </div>

              <!-- 审核信息 -->
              <div>
                <h4 class="font-medium text-gray-900 mb-2">审核评估</h4>
                ${renderScoreSection(ad)}
                ${renderRiskTags(ad)}
                <div class="mt-4">
                  <p class="text-sm text-gray-600 mb-2">${getRecommendationLabel(ad.status)}：</p>
                  <p class="text-xs text-gray-500 ${getRecommendationBg(ad.status)} p-2 rounded">${ad.suggestion}</p>
                </div>
              </div>
            </div>

            ${renderActionButtons(ad)}
          </div>
        </div>
      `).join('');
    }

    // 辅助函数
    function getIconClass(type) {
      const icons = { 
        'text+images': 'fas fa-images', 
        'text+video': 'fas fa-video',
        text: 'fas fa-font', 
        image: 'fas fa-image', 
        video: 'fas fa-video' 
      };
      return icons[type] || 'fas fa-file';
    }

    function getIconBgColor(type) {
      const colors = { 
        'text+images': 'bg-blue-100', 
        'text+video': 'bg-green-100',
        text: 'bg-blue-100', 
        image: 'bg-green-100', 
        video: 'bg-red-100' 
      };
      return colors[type] || 'bg-gray-100';
    }

    function getIconColor(type) {
      const colors = { 
        'text+images': 'text-blue-600', 
        'text+video': 'text-green-600',
        text: 'text-blue-600', 
        image: 'text-green-600', 
        video: 'text-red-600' 
      };
      return colors[type] || 'text-gray-600';
    }

    function getStatusText(status) {
      const texts = {
        'auto-approved': '机审通过',
        'auto-rejected': '机审不通过', 
        'auto-uncertain': '机审待定',
        'manual-approved': '人审通过',
        'manual-rejected': '人审不通过'
      };
      return texts[status] || status;
    }

    function renderAdContent(ad) {
      let content = '';
      
      if (ad.type === 'text+images') {
        // 文本+多图广告
        content = `
          <!-- 文本内容 -->
          <div class="bg-gray-50 p-4 rounded-lg mb-4">
            <h5 class="font-medium text-gray-800 mb-2 flex items-center">
              <i class="fas fa-font text-gray-600 mr-2"></i>文本内容
            </h5>
            <p class="text-gray-800 mb-2 font-medium">标题：${ad.content.text.title}</p>
            <p class="text-gray-600 text-sm">描述：${ad.content.text.description}</p>
          </div>
          <!-- 图片内容 -->
          <div class="bg-gray-50 p-4 rounded-lg">
            <h5 class="font-medium text-gray-800 mb-3 flex items-center">
              <i class="fas fa-images text-gray-600 mr-2"></i>图片内容 (${ad.content.images.length}张)
            </h5>
            <div class="grid grid-cols-3 gap-3">
              ${ad.content.images.map(img => `
                <div class="relative">
                  <img src="${img.url}" alt="${img.label}" class="w-full h-24 object-cover rounded-lg">
                  <span class="absolute top-1 right-1 bg-black bg-opacity-60 text-white text-xs px-1 rounded">${img.label}</span>
                </div>
              `).join('')}
            </div>
          </div>`;
      } else if (ad.type === 'text+video') {
        // 文本+视频广告
        content = `
          <!-- 文本内容 -->
          <div class="bg-gray-50 p-4 rounded-lg mb-4">
            <h5 class="font-medium text-gray-800 mb-2 flex items-center">
              <i class="fas fa-font text-gray-600 mr-2"></i>文本内容
            </h5>
            <p class="text-gray-800 mb-2 font-medium">标题：${ad.content.text.title}</p>
            <p class="text-gray-600 text-sm">描述：${ad.content.text.description}</p>
          </div>
          <!-- 视频内容 -->
          <div class="bg-gray-50 p-4 rounded-lg">
            <h5 class="font-medium text-gray-800 mb-3 flex items-center">
              <i class="fas fa-video text-gray-600 mr-2"></i>视频内容
            </h5>
            <div class="relative">
              <div class="w-full h-48 bg-gray-200 rounded-lg flex items-center justify-center relative overflow-hidden">
                <img src="${ad.content.video.url}" alt="视频封面" class="w-full h-full object-cover">
                <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                  <i class="fas fa-play-circle text-white text-6xl"></i>
                </div>
                <span class="absolute bottom-2 right-2 bg-black bg-opacity-70 text-white text-xs px-2 py-1 rounded">${ad.content.video.duration}</span>
              </div>
              <p class="text-sm text-gray-600 mt-2">${ad.content.video.description}</p>
            </div>
          </div>`;
      }
      
      return content;
    }

    function renderScoreSection(ad) {
      const statusBg = getStatusBgColor(ad.status);
      const statusIcon = getStatusIcon(ad.status);
      const statusColor = getStatusTextColor(ad.status);
      
      return `<div class="${statusBg} p-4 rounded-lg mb-4">
                <div class="flex items-center mb-2">
                  <i class="${statusIcon} ${statusColor} mr-2"></i>
                  <span class="text-sm font-medium ${statusColor}">${ad.reviewer || '机器审核'}结果</span>
                </div>
                <p class="text-sm ${statusColor}">当前状态：${getStatusText(ad.status)}</p>
                ${ad.reviewTime ? `<p class="text-xs ${statusColor} mt-1">审核时间：${ad.reviewTime}</p>` : ''}
              </div>`;
    }

    function renderRiskTags(ad) {
      let content = `<div class="mt-4">
                       <p class="text-sm text-gray-600 mb-3">检测到的违规标签：</p>`;
      
      // 文本违规标签
      if (ad.riskTags.text) {
        content += `
          <div class="mb-3">
            <p class="text-xs text-gray-500 mb-2 flex items-center">
              <i class="fas fa-font text-gray-400 mr-1"></i>文本内容
            </p>
            <div class="flex flex-wrap gap-2">
              ${ad.riskTags.text.map(tag => `
                <span class="risk-tag ${getTagStyle(tag)} px-2 py-1 rounded-full text-xs font-medium border">
                  <i class="${getTagIcon(tag)} mr-1"></i>${tag}
                </span>
              `).join('')}
            </div>
          </div>`;
      }

      // 图片违规标签
      if (ad.riskTags.images) {
        content += `
          <div class="mb-3">
            <p class="text-xs text-gray-500 mb-2 flex items-center">
              <i class="fas fa-images text-gray-400 mr-1"></i>图片内容
            </p>
            <div class="flex flex-wrap gap-2">
              ${ad.riskTags.images.map(tag => `
                <span class="risk-tag ${getTagStyle(tag)} px-2 py-1 rounded-full text-xs font-medium border">
                  <i class="${getTagIcon(tag)} mr-1"></i>${tag}
                </span>
              `).join('')}
            </div>
          </div>`;
      }

      // 视频违规标签
      if (ad.riskTags.video) {
        content += `
          <div class="mb-3">
            <p class="text-xs text-gray-500 mb-2 flex items-center">
              <i class="fas fa-video text-gray-400 mr-1"></i>视频内容
            </p>
            <div class="flex flex-wrap gap-2">
              ${ad.riskTags.video.map(tag => `
                <span class="risk-tag ${getTagStyle(tag)} px-2 py-1 rounded-full text-xs font-medium border">
                  <i class="${getTagIcon(tag)} mr-1"></i>${tag}
                </span>
              `).join('')}
            </div>
          </div>`;
      }

      content += `</div>`;
      return content;
    }

    function renderActionButtons(ad) {
      let buttons = '';
      let reviewInfo = '';
      
      if (ad.reviewer && ad.reviewTime) {
        reviewInfo = `<div class="text-sm text-gray-500">
                        <i class="fas fa-user mr-1"></i>审核人：${ad.reviewer} • 
                        <i class="fas fa-clock ml-2 mr-1"></i>审核时间：${ad.reviewTime}
                        ${ad.manualNote ? `<br><i class="fas fa-comment ml-0 mr-1"></i>备注：${ad.manualNote}` : ''}
                        ${ad.rejectionReason ? `<br><i class="fas fa-ban ml-0 mr-1"></i>不通过理由：${ad.rejectionReason}` : ''}
                        ${ad.customerNotified ? `<br><i class="fas fa-envelope ml-0 mr-1 text-blue-600"></i>已通知客户` : ''}
                        ${ad.badcaseFeedbacks && ad.badcaseFeedbacks.length > 0 ? `<br><i class="fas fa-exclamation-triangle ml-0 mr-1 text-orange-600"></i>Badcase反馈：${ad.badcaseFeedbacks.length}条` : ''}
                      </div>`;
      }
      
      // 判断是否已进行人工审核
      const hasManualReview = ad.status.includes('manual-');
      
      if (!hasManualReview) {
        // 机审完成但未人工审核：显示人工审核按钮
        buttons = `<div class="flex space-x-2">
                     <button onclick="openManualReview('${ad.id}')" class="bg-blue-600 text-white px-4 py-2 rounded-md text-sm hover:bg-blue-700">
                       <i class="fas fa-user-edit mr-1"></i>人工审核
                     </button>
                   </div>`;
      } else {
        // 已进行人工审核：不显示人工审核按钮
        buttons = `<div class="text-sm text-gray-500">
                     <i class="fas fa-check-double mr-1"></i>人工审核已完成
                   </div>`;
      }
      
      return `<div class="mt-6 flex justify-between items-center">
                ${buttons}
                <div class="text-right">
                  ${reviewInfo}
                </div>
              </div>`;
    }

    function getScoreColor(score) {
      if (score >= 80) return 'bg-green-500';
      if (score >= 60) return 'bg-yellow-500';
      return 'bg-red-500';
    }

    function getRiskLevel(risk) {
      if (risk <= 20) return '极低';
      if (risk <= 40) return '低';
      if (risk <= 60) return '中等';
      if (risk <= 80) return '高';
      return '极高';
    }

    function getRiskColor(risk) {
      if (risk <= 20) return 'bg-green-500';
      if (risk <= 40) return 'bg-yellow-500';
      if (risk <= 60) return 'bg-orange-500';
      return 'bg-red-500';
    }

    function getTagStyle(tag) {
      if (tag === '内容正常') return 'bg-green-100 text-green-800 border-green-200';
      if (['夸大宣传', '营销导向', '紧迫营销', '就业承诺', '收益暗示'].includes(tag)) return 'bg-yellow-100 text-yellow-800 border-yellow-200';
      if (['夸大效果', '收益承诺', '金融风险'].includes(tag)) return 'bg-orange-100 text-orange-800 border-orange-200';
      if (['健康声明', '医疗声明'].includes(tag)) return 'bg-purple-100 text-purple-800 border-purple-200';
      return 'bg-red-100 text-red-800 border-red-200';
    }

    function getTagIcon(tag) {
      if (tag === '内容正常') return 'fas fa-check-circle';
      if (['夸大宣传', '夸大效果'].includes(tag)) return 'fas fa-exclamation-triangle';
      if (['营销导向', '紧迫营销'].includes(tag)) return 'fas fa-bullhorn';
      if (['健康声明', '医疗声明'].includes(tag)) return 'fas fa-heart';
      if (tag === '误导定价') return 'fas fa-dollar-sign';
      if (['收益承诺', '收益暗示'].includes(tag)) return 'fas fa-chart-line';
      if (tag === '金融风险') return 'fas fa-coins';
      if (tag === '误导演示') return 'fas fa-play-circle';
      return 'fas fa-ban';
    }

    function getRecommendationLabel(status) {
      if (status.includes('rejected')) return '拒绝原因';
      if (status.includes('approved')) return '审核建议';
      return '审核建议';
    }

    function getRecommendationBg(status) {
      if (status.includes('rejected')) return 'bg-red-50';
      if (status.includes('approved')) return 'bg-green-50';
      if (status === 'auto-uncertain') return 'bg-blue-50';
      return 'bg-yellow-50';
    }

    function getStatusBgColor(status) {
      if (status.includes('approved')) return 'bg-green-50';
      if (status.includes('rejected')) return 'bg-red-50';
      if (status === 'auto-uncertain') return 'bg-blue-50';
      return 'bg-yellow-50';
    }

    function getStatusIcon(status) {
      if (status.includes('manual-')) return 'fas fa-user-check';
      if (status.includes('auto-')) return 'fas fa-robot';
      return 'fas fa-clock';
    }

    function getStatusTextColor(status) {
      if (status.includes('approved')) return 'text-green-700';
      if (status.includes('rejected')) return 'text-red-700';
      if (status === 'auto-uncertain') return 'text-blue-700';
      return 'text-yellow-700';
    }

    // 筛选功能
    function filterByStatus() {
      const statusFilter = document.getElementById('statusFilter').value;
      renderAdList(statusFilter);
    }

    // 人工审核相关函数
    function openManualReview(adId) {
      currentReviewAdId = adId;
      document.getElementById('manualReviewModal').classList.remove('hidden');
      // 重置表单
      resetManualReviewForm();
    }

    function closeManualReviewModal() {
      document.getElementById('manualReviewModal').classList.add('hidden');
      currentReviewAdId = null;
      resetManualReviewForm();
    }

    function resetManualReviewForm() {
      // 重置所有表单元素
      document.querySelectorAll('input[name="manualResult"]').forEach(radio => radio.checked = false);
      document.getElementById('rejectionReason').value = '';
      document.getElementById('notifyCustomer').checked = false;
      
      // 重置Badcase反馈数据
      badcaseFeedbacks = [];
      document.getElementById('badcaseFeedbackList').innerHTML = '';
      
      // 隐藏所有选项区域
      document.getElementById('approvedSection').classList.add('hidden');
      document.getElementById('rejectedSection').classList.add('hidden');
    }

    function toggleReviewOptions() {
      const selectedResult = document.querySelector('input[name="manualResult"]:checked');
      const approvedSection = document.getElementById('approvedSection');
      const rejectedSection = document.getElementById('rejectedSection');
      
      if (selectedResult) {
        if (selectedResult.value === 'approved') {
          approvedSection.classList.remove('hidden');
          rejectedSection.classList.add('hidden');
        } else if (selectedResult.value === 'rejected') {
          approvedSection.classList.add('hidden');
          rejectedSection.classList.remove('hidden');
        }
      } else {
        approvedSection.classList.add('hidden');
        rejectedSection.classList.add('hidden');
      }
    }

    // Badcase反馈相关函数
    function addBadcaseFeedback() {
      const feedbackId = 'feedback_' + Date.now();
      const feedback = {
        id: feedbackId,
        materialType: '',
        violationEvidence: '',
        detailedReason: '',
        improvementSuggestion: ''
      };
      
      badcaseFeedbacks.push(feedback);
      renderBadcaseFeedbackList();
    }

    function removeBadcaseFeedback(feedbackId) {
      badcaseFeedbacks = badcaseFeedbacks.filter(f => f.id !== feedbackId);
      renderBadcaseFeedbackList();
    }

    function updateBadcaseFeedback(feedbackId, field, value) {
      const feedback = badcaseFeedbacks.find(f => f.id === feedbackId);
      if (feedback) {
        feedback[field] = value;
      }
    }

    function renderBadcaseFeedbackList() {
      const container = document.getElementById('badcaseFeedbackList');
      
      if (badcaseFeedbacks.length === 0) {
        container.innerHTML = '<p class="text-gray-500 text-sm text-center py-4">暂无反馈内容，点击"添加反馈"按钮添加</p>';
        return;
      }
      
      // 使用网格布局展示反馈卡片，充分利用空间
      const feedbackCards = badcaseFeedbacks.map((feedback, index) => `
        <div class="border border-orange-200 rounded-lg p-4 bg-white">
          <div class="flex items-center justify-between mb-3">
            <span class="text-sm font-medium text-gray-700">反馈 ${index + 1}</span>
            <button type="button" onclick="removeBadcaseFeedback('${feedback.id}')" class="text-red-500 hover:text-red-700 text-sm">
              <i class="fas fa-trash"></i>
            </button>
          </div>
          
          <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3">
            <!-- 素材类型 -->
            <div>
              <label class="block text-xs font-medium text-gray-600 mb-1">素材类型 <span class="text-red-500">*</span></label>
              <select class="w-full text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-orange-500" 
                      onchange="updateBadcaseFeedback('${feedback.id}', 'materialType', this.value)">
                <option value="">请选择</option>
                <option value="text" ${feedback.materialType === 'text' ? 'selected' : ''}>文本</option>
                <option value="image" ${feedback.materialType === 'image' ? 'selected' : ''}>图片</option>
                <option value="video" ${feedback.materialType === 'video' ? 'selected' : ''}>视频</option>
              </select>
            </div>
            
            <!-- 违规证据 -->
            <div>
              <label class="block text-xs font-medium text-gray-600 mb-1">违规证据 <span class="text-red-500">*</span></label>
              <input type="text" class="w-full text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-orange-500" 
                     placeholder="请输入违规证据..." 
                     value="${feedback.violationEvidence}"
                     onchange="updateBadcaseFeedback('${feedback.id}', 'violationEvidence', this.value)">
            </div>
            
            <!-- 详细原因 -->
            <div>
              <label class="block text-xs font-medium text-gray-600 mb-1">详细原因</label>
              <input type="text" class="w-full text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-orange-500" 
                     placeholder="请输入详细原因..." 
                     value="${feedback.detailedReason}"
                     onchange="updateBadcaseFeedback('${feedback.id}', 'detailedReason', this.value)">
            </div>
            
            <!-- 改进建议 -->
            <div>
              <label class="block text-xs font-medium text-gray-600 mb-1">改进建议</label>
              <input type="text" class="w-full text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-orange-500" 
                     placeholder="请输入改进建议..." 
                     value="${feedback.improvementSuggestion}"
                     onchange="updateBadcaseFeedback('${feedback.id}', 'improvementSuggestion', this.value)">
            </div>
          </div>
        </div>
      `);
      
      // 每个反馈卡片占一整行，避免内容拥挤
      container.innerHTML = `
        <div class="space-y-4">
          ${feedbackCards.join('')}
        </div>
      `;
    }

    function submitManualReview() {
      const selectedResult = document.querySelector('input[name="manualResult"]:checked');
      
      if (!selectedResult) {
        alert('请选择审核结果');
        return;
      }
      
      if (selectedResult.value === 'rejected') {
        // 验证不通过时的必填项
        const rejectionReason = document.getElementById('rejectionReason').value.trim();
        if (!rejectionReason) {
          alert('请输入不通过理由');
          return;
        }
        
        // 验证Badcase反馈的必填项
        for (let i = 0; i < badcaseFeedbacks.length; i++) {
          const feedback = badcaseFeedbacks[i];
          if (!feedback.materialType) {
            alert(`反馈 ${i + 1} 的素材类型为必填项`);
            return;
          }
          if (!feedback.violationEvidence.trim()) {
            alert(`反馈 ${i + 1} 的违规证据为必填项`);
            return;
          }
        }
      }
      
      // 更新广告状态
      const ad = adData.find(a => a.id === currentReviewAdId);
      if (ad) {
        ad.status = selectedResult.value === 'approved' ? 'manual-approved' : 'manual-rejected';
        ad.reviewer = '当前管理员';
        ad.reviewTime = new Date().toLocaleString('zh-CN', {
          year: 'numeric',
          month: '2-digit',
          day: '2-digit',
          hour: '2-digit',
          minute: '2-digit'
        });
        
        if (selectedResult.value === 'approved') {
          ad.manualNote = '人工审核通过';
        } else {
          // 不通过时保存详细信息
          ad.rejectionReason = document.getElementById('rejectionReason').value.trim();
          ad.customerNotified = document.getElementById('notifyCustomer').checked;
          ad.badcaseFeedbacks = [...badcaseFeedbacks]; // 保存Badcase反馈数据
          
          let manualNote = '人工审核不通过';
          if (ad.customerNotified) {
            manualNote += '，已通知客户';
          }
          if (ad.badcaseFeedbacks.length > 0) {
            manualNote += `，已记录${ad.badcaseFeedbacks.length}条Badcase反馈`;
          }
          ad.manualNote = manualNote;
        }
        
        // 重新渲染列表
        renderAdList(document.getElementById('statusFilter').value);
        
        let message = `人工审核完成，结果：${selectedResult.value === 'approved' ? '通过' : '不通过'}`;
        if (selectedResult.value === 'rejected') {
          if (ad.customerNotified) {
            message += '\n客户通知已发送';
          }
          if (ad.badcaseFeedbacks && ad.badcaseFeedbacks.length > 0) {
            message += `\n已记录${ad.badcaseFeedbacks.length}条Badcase反馈`;
          }
        }
        alert(message);
      }
      
      closeManualReviewModal();
    }

    // 侧边栏切换函数
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      
      if (sidebar.classList.contains('mobile-menu-closed')) {
        sidebar.classList.remove('mobile-menu-closed');
        sidebar.classList.add('mobile-menu-open');
        overlay.classList.remove('hidden');
        overlay.classList.remove('opacity-0');
        overlay.classList.add('opacity-50');
      } else {
        sidebar.classList.remove('mobile-menu-open');
        sidebar.classList.add('mobile-menu-closed');
        overlay.classList.add('opacity-0');
        overlay.classList.remove('opacity-50');
        setTimeout(() => {
          overlay.classList.add('hidden');
        }, 300);
      }
    }

    // 关闭侧边栏
    document.getElementById('sidebar-overlay').addEventListener('click', function() {
      toggleSidebar();
    });

    // 详情模态框相关函数
    let currentDetailAdId = null;
    let currentDetailTab = 'content';

    function openAdDetail(adId) {
      currentDetailAdId = adId;
      currentDetailTab = 'content';
      
      const ad = adData.find(a => a.id === adId);
      if (!ad) {
        alert('未找到广告数据');
        return;
      }

      // 填充模态框内容
      populateDetailModal(ad);
      
      // 显示模态框
      document.getElementById('detailModal').classList.remove('hidden');
      
      // 切换到内容标签页
      switchDetailTab('content');
    }

    function populateDetailModal(ad) {
      // 更新标题
      document.getElementById('detailModalTitle').textContent = ad.title;
      document.getElementById('detailModalSubtitle').textContent = `广告主：${ad.customer} • ${ad.type === 'text+images' ? '文本+多图' : '文本+视频'}广告`;
      
      // 填充基础信息
      populateBasicInfo(ad);
      
      // 填充Facebook层级信息
      populateFbLevelInfo(ad);
      
      // 填充评分详情
      populateScoreDetails(ad);
      
      // 填充文本内容
      populateTextContent(ad);
      
      // 填充媒体内容
      populateMediaContent(ad);
      
      // 填充风险标签详情
      populateRiskTagsDetails(ad);
      
      // 填充审核记录
      populateReviewRecords(ad);
      
      // 填充系统记录
      populateSystemRecords(ad);
      
      // 更新最后更新时间
      document.getElementById('lastUpdateTime').textContent = ad.reviewTime || ad.submitTime;
      
      // 显示/隐藏人工审核按钮
      const hasManualReview = ad.status.includes('manual-');
      const manualReviewBtn = document.getElementById('detailManualReviewBtn');
      if (hasManualReview) {
        manualReviewBtn.classList.add('hidden');
      } else {
        manualReviewBtn.classList.remove('hidden');
      }
    }

    function populateBasicInfo(ad) {
      const basicInfo = document.getElementById('basicInfo');
      basicInfo.innerHTML = `
        <div class="flex justify-between">
          <span class="text-gray-600">广告ID:</span>
          <span class="font-mono font-medium">${ad.id}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-600">广告主:</span>
          <span class="font-medium">${ad.customer}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-600">提交时间:</span>
          <span class="font-medium">${ad.submitTime}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-600">当前状态:</span>
          <span class="status-${ad.status.replace('-', '-')} px-2 py-1 rounded-full text-xs font-medium">${getStatusText(ad.status)}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-600">素材类型:</span>
          <span class="font-medium">${ad.type === 'text+images' ? '文本+多图' : '文本+视频'}</span>
        </div>
        ${ad.reviewer ? `
        <div class="flex justify-between">
          <span class="text-gray-600">审核人:</span>
          <span class="font-medium">${ad.reviewer}</span>
        </div>
        <div class="flex justify-between">
          <span class="text-gray-600">审核时间:</span>
          <span class="font-medium">${ad.reviewTime}</span>
        </div>
        ` : ''}
      `;
    }

    function populateFbLevelInfo(ad) {
      const fbLevelInfo = document.getElementById('fbLevelInfo');
      fbLevelInfo.innerHTML = `
        <div class="grid grid-cols-2 gap-4">
          <div>
            <span class="text-gray-600 text-sm">广告账户ID:</span>
            <p class="font-mono font-medium text-blue-700">${ad.fbInfo.adAccount}</p>
          </div>
          <div>
            <span class="text-gray-600 text-sm">Campaign ID:</span>
            <p class="font-mono font-medium text-green-700">${ad.fbInfo.campaignId}</p>
          </div>
          <div>
            <span class="text-gray-600 text-sm">Adset ID:</span>
            <p class="font-mono font-medium text-purple-700">${ad.fbInfo.adsetId}</p>
          </div>
          <div>
            <span class="text-gray-600 text-sm">Ad ID:</span>
            <p class="font-mono font-medium text-orange-700">${ad.fbInfo.adId}</p>
          </div>
        </div>
        <div class="mt-4 pt-4 border-t border-blue-200">
          <button class="text-blue-600 hover:text-blue-800 text-sm font-medium">
            <i class="fab fa-facebook mr-2"></i>在Facebook广告管理器中查看
          </button>
        </div>
      `;
    }

    function populateScoreDetails(ad) {
      const scoreDetails = document.getElementById('scoreDetails');
      const statusBg = getStatusBgColor(ad.status);
      const statusIcon = getStatusIcon(ad.status);
      const statusColor = getStatusTextColor(ad.status);
      
      scoreDetails.innerHTML = `
        <div class="${statusBg} p-4 rounded-lg">
          <div class="flex items-center mb-3">
            <i class="${statusIcon} ${statusColor} mr-2"></i>
            <span class="text-lg font-medium ${statusColor}">机器审核结果</span>
          </div>
          <div class="space-y-2">
            <p class="text-sm ${statusColor}"><strong>审核状态：</strong>${getStatusText(ad.status)}</p>
            <p class="text-sm ${statusColor}"><strong>审核时间：</strong>${ad.reviewTime || ad.submitTime}</p>
            <p class="text-sm ${statusColor}"><strong>审核说明：</strong>${ad.suggestion}</p>
          </div>
        </div>
      `;
    }

    function populateTextContent(ad) {
      const textContent = document.getElementById('textContent');
      textContent.innerHTML = `
        <div class="space-y-4">
          <div>
            <h4 class="font-medium text-gray-800 mb-2">广告标题</h4>
            <div class="bg-gray-50 p-3 rounded-lg">
              <p class="text-gray-900 font-medium">${ad.content.text.title}</p>
            </div>
          </div>
          
          <div>
            <h4 class="font-medium text-gray-800 mb-2">广告描述</h4>
            <div class="bg-gray-50 p-3 rounded-lg">
              <p class="text-gray-800 leading-relaxed">${ad.content.text.description}</p>
            </div>
          </div>
          

        </div>
      `;
    }

    function populateMediaContent(ad) {
      const mediaContent = document.getElementById('mediaContent');
      const mediaIcon = document.getElementById('mediaIcon');
      const mediaTitle = document.getElementById('mediaTitle');
      
      if (ad.type === 'text+images') {
        mediaIcon.className = 'fas fa-images text-green-600 mr-2';
        mediaTitle.textContent = '图片内容';
        
        mediaContent.innerHTML = `
          <div class="grid grid-cols-1 gap-4">
            ${ad.content.images.map((img, index) => `
              <div class="border border-gray-200 rounded-lg overflow-hidden">
                <img src="${img.url}" alt="${img.label}" class="w-full h-64 object-cover">
                <div class="p-3 bg-gray-50">
                  <div class="flex justify-between items-center">
                    <span class="text-sm font-medium text-gray-700">图片 ${index + 1}</span>
                    <span class="text-xs bg-gray-200 px-2 py-1 rounded">${img.label}</span>
                  </div>
                </div>
              </div>
            `).join('')}
          </div>
        `;
      } else if (ad.type === 'text+video') {
        mediaIcon.className = 'fas fa-video text-green-600 mr-2';
        mediaTitle.textContent = '视频内容';
        
        mediaContent.innerHTML = `
          <div class="border border-gray-200 rounded-lg overflow-hidden">
            <div class="relative">
              <img src="${ad.content.video.url}" alt="视频封面" class="w-full h-64 object-cover">
              <div class="absolute inset-0 bg-black bg-opacity-40 flex items-center justify-center">
                <button class="bg-white bg-opacity-90 rounded-full p-4 hover:bg-opacity-100 transition-all">
                  <i class="fas fa-play text-3xl text-gray-800"></i>
                </button>
              </div>
              <span class="absolute bottom-3 right-3 bg-black bg-opacity-70 text-white text-sm px-2 py-1 rounded">${ad.content.video.duration}</span>
            </div>
            <div class="p-4 bg-gray-50">
              <p class="text-sm text-gray-700">${ad.content.video.description}</p>
            </div>
          </div>
        `;
      }
    }

    function populateRiskTagsDetails(ad) {
      const riskTagsDetails = document.getElementById('riskTagsDetails');
      let content = '';
      
      // 文本风险标签
      if (ad.riskTags.text) {
        content += `
          <div class="mb-4">
            <h4 class="font-medium text-gray-800 mb-3 flex items-center">
              <i class="fas fa-font text-gray-600 mr-2"></i>文本内容检测结果
            </h4>
            <div class="flex flex-wrap gap-2">
              ${ad.riskTags.text.map(tag => `
                <span class="risk-tag ${getTagStyle(tag)} px-3 py-2 rounded-lg text-sm font-medium border">
                  <i class="${getTagIcon(tag)} mr-1"></i>${tag}
                </span>
              `).join('')}
            </div>
          </div>
        `;
      }
      
      // 图片风险标签
      if (ad.riskTags.images) {
        content += `
          <div class="mb-4">
            <h4 class="font-medium text-gray-800 mb-3 flex items-center">
              <i class="fas fa-images text-gray-600 mr-2"></i>图片内容检测结果
            </h4>
            <div class="flex flex-wrap gap-2">
              ${ad.riskTags.images.map(tag => `
                <span class="risk-tag ${getTagStyle(tag)} px-3 py-2 rounded-lg text-sm font-medium border">
                  <i class="${getTagIcon(tag)} mr-1"></i>${tag}
                </span>
              `).join('')}
            </div>
          </div>
        `;
      }
      
      // 视频风险标签
      if (ad.riskTags.video) {
        content += `
          <div class="mb-4">
            <h4 class="font-medium text-gray-800 mb-3 flex items-center">
              <i class="fas fa-video text-gray-600 mr-2"></i>视频内容检测结果
            </h4>
            <div class="flex flex-wrap gap-2">
              ${ad.riskTags.video.map(tag => `
                <span class="risk-tag ${getTagStyle(tag)} px-3 py-2 rounded-lg text-sm font-medium border">
                  <i class="${getTagIcon(tag)} mr-1"></i>${tag}
                </span>
              `).join('')}
            </div>
          </div>
        `;
      }
      
      // AI建议
      content += `
        <div class="mt-6 pt-4 border-t border-yellow-200">
          <h4 class="font-medium text-gray-800 mb-2 flex items-center">
            <i class="fas fa-robot text-blue-600 mr-2"></i>AI审核建议
          </h4>
          <div class="bg-white p-4 rounded-lg border border-gray-200">
            <p class="text-gray-700">${ad.suggestion}</p>
          </div>
        </div>
      `;
      
      riskTagsDetails.innerHTML = content;
    }

    function populateReviewRecords(ad) {
      // 生成审核时间线
      const timeline = generateReviewTimeline(ad);
      document.getElementById('reviewTimeline').innerHTML = timeline;
      
      // 生成详细审核记录
      const detailedRecords = generateDetailedReviewRecords(ad);
      document.getElementById('detailedReviewRecords').innerHTML = detailedRecords;
    }

    function populateSystemRecords(ad) {
      // 生成系统操作记录
      const systemOps = generateSystemOperations(ad);
      document.getElementById('systemOperations').innerHTML = systemOps;
      
      // 生成客户通知记录
      const notifications = generateCustomerNotifications(ad);
      document.getElementById('customerNotifications').innerHTML = notifications;
    }

    // 辅助函数
    function getScoreDescription(score, type) {
      if (type === 'compliance') {
        if (score >= 90) return '内容完全符合平台规范，可直接通过';
        if (score >= 80) return '内容基本符合规范，建议少量调整';
        if (score >= 60) return '内容存在一定问题，需要修改部分表述';
        return '内容违规风险较高，建议重新制作';
      } else if (type === 'quality') {
        if (score >= 90) return '素材质量优秀，用户体验佳';
        if (score >= 80) return '素材质量良好，符合投放标准';
        if (score >= 60) return '素材质量一般，建议优化';
        return '素材质量较差，建议重新制作';
      }
      return '';
    }

    function getRiskDescription(risk) {
      if (risk <= 20) return '风险极低，可安全投放';
      if (risk <= 40) return '风险较低，建议关注';
      if (risk <= 60) return '风险中等，需要仔细审核';
      if (risk <= 80) return '风险较高，建议谨慎处理';
      return '风险极高，强烈建议拒绝';
    }

    function generateReviewTimeline(ad) {
      const events = [];
      
      // 提交事件
      events.push({
        time: ad.submitTime,
        type: 'submit',
        title: '广告提交',
        description: '广告主提交广告素材',
        icon: 'fas fa-upload',
        color: 'blue'
      });
      
      // 机审事件
      if (ad.reviewer === '机器审核' && ad.reviewTime) {
        events.push({
          time: ad.reviewTime,
          type: 'auto-review',
          title: '机器审核完成',
          description: `审核结果：${getStatusText(ad.status)}`,
          icon: 'fas fa-robot',
          color: ad.status.includes('approved') ? 'green' : ad.status.includes('rejected') ? 'red' : 'yellow'
        });
      }
      
      // 人工审核事件
      if (ad.status.includes('manual-')) {
        events.push({
          time: ad.reviewTime,
          type: 'manual-review',
          title: '人工审核完成',
          description: `审核人：${ad.reviewer} • 结果：${getStatusText(ad.status)}`,
          icon: 'fas fa-user-check',
          color: ad.status.includes('approved') ? 'green' : 'red'
        });
      }
      
      return events.map((event, index) => `
        <div class="flex items-start space-x-4">
          <div class="flex-shrink-0">
            <div class="w-10 h-10 bg-${event.color}-100 rounded-full flex items-center justify-center">
              <i class="${event.icon} text-${event.color}-600"></i>
            </div>
          </div>
          <div class="flex-1 min-w-0">
            <div class="flex items-center justify-between">
              <h4 class="text-sm font-medium text-gray-900">${event.title}</h4>
              <span class="text-sm text-gray-500">${event.time}</span>
            </div>
            <p class="text-sm text-gray-600 mt-1">${event.description}</p>
          </div>
        </div>
        ${index < events.length - 1 ? '<div class="ml-5 w-px h-8 bg-gray-200"></div>' : ''}
      `).join('');
    }

    function generateDetailedReviewRecords(ad) {
      let records = '';
      
      // 机审记录
      if (ad.reviewer === '机器审核') {
        records += `
          <div class="bg-white border border-gray-200 rounded-lg p-4 mb-4">
            <div class="flex items-center justify-between mb-3">
              <h4 class="font-medium text-gray-900 flex items-center">
                <i class="fas fa-robot text-blue-600 mr-2"></i>机器审核记录
              </h4>
              <span class="text-sm text-gray-500">${ad.reviewTime}</span>
            </div>
            <div class="space-y-2 text-sm">
              <p><strong>审核结果:</strong> ${getStatusText(ad.status)}</p>
              <p><strong>评分详情:</strong> 文案${ad.scores.compliance}分，质量${ad.scores.quality}分，风险${ad.scores.risk}%</p>
              <p><strong>检测标签:</strong> ${Object.values(ad.riskTags).flat().join('、')}</p>
              <p><strong>AI建议:</strong> ${ad.suggestion}</p>
            </div>
          </div>
        `;
      }
      
      // 人工审核记录
      if (ad.status.includes('manual-')) {
        records += `
          <div class="bg-white border border-gray-200 rounded-lg p-4">
            <div class="flex items-center justify-between mb-3">
              <h4 class="font-medium text-gray-900 flex items-center">
                <i class="fas fa-user-check text-green-600 mr-2"></i>人工审核记录
              </h4>
              <span class="text-sm text-gray-500">${ad.reviewTime}</span>
            </div>
            <div class="space-y-2 text-sm">
              <p><strong>审核人:</strong> ${ad.reviewer}</p>
              <p><strong>审核结果:</strong> ${getStatusText(ad.status)}</p>
              ${ad.manualNote ? `<p><strong>审核备注:</strong> ${ad.manualNote}</p>` : ''}
              ${ad.rejectionReason ? `<p><strong>不通过理由:</strong> ${ad.rejectionReason}</p>` : ''}
              ${ad.customerNotified ? `<p class="text-blue-600"><strong>通知状态:</strong> 已向客户发送通知</p>` : ''}
              ${ad.badcaseFeedbacks && ad.badcaseFeedbacks.length > 0 ? `<p class="text-orange-600"><strong>Badcase反馈:</strong> 已记录${ad.badcaseFeedbacks.length}条反馈</p>` : ''}
            </div>
          </div>
        `;
      }
      
      return records || '<p class="text-gray-500 text-center py-8">暂无详细审核记录</p>';
    }

    function generateSystemOperations(ad) {
      const operations = [
        {
          time: ad.submitTime,
          operation: '系统接收',
          description: '广告素材成功上传到系统',
          status: 'success'
        },
        {
          time: ad.submitTime,
          operation: '数据验证',
          description: '验证广告素材格式和完整性',
          status: 'success'
        },
        {
          time: ad.reviewTime || ad.submitTime,
          operation: 'AI分析',
          description: '机器学习模型完成内容分析',
          status: 'success'
        }
      ];
      
      if (ad.badcaseFeedbacks && ad.badcaseFeedbacks.length > 0) {
        operations.push({
          time: ad.reviewTime,
          operation: 'Badcase记录',
          description: `管理员记录了${ad.badcaseFeedbacks.length}条Badcase反馈`,
          status: 'warning'
        });
      }
      
      return operations.map(op => `
        <div class="flex items-center justify-between py-3 border-b border-gray-100 last:border-b-0">
          <div class="flex items-center space-x-3">
            <div class="w-2 h-2 rounded-full ${op.status === 'success' ? 'bg-green-500' : 'bg-yellow-500'}"></div>
            <div>
              <p class="text-sm font-medium text-gray-900">${op.operation}</p>
              <p class="text-xs text-gray-500">${op.description}</p>
            </div>
          </div>
          <span class="text-xs text-gray-400">${op.time}</span>
        </div>
      `).join('');
    }

    function generateCustomerNotifications(ad) {
      if (!ad.customerNotified) {
        return '<p class="text-gray-500 text-center py-8">暂无客户通知记录</p>';
      }
      
      return `
        <div class="bg-white border border-blue-200 rounded-lg p-4">
          <div class="flex items-center justify-between mb-3">
            <h4 class="font-medium text-gray-900 flex items-center">
              <i class="fas fa-envelope text-blue-600 mr-2"></i>审核不通过通知
            </h4>
            <span class="text-sm text-gray-500">${ad.reviewTime}</span>
          </div>
          <div class="space-y-2 text-sm">
            <p><strong>通知类型:</strong> 站内信</p>
            <p><strong>发送状态:</strong> <span class="text-green-600">已发送</span></p>
            <p><strong>通知内容:</strong></p>
            <div class="bg-gray-50 p-3 rounded border-l-4 border-blue-500 mt-2">
              <p class="text-gray-700">${ad.notificationMessage || '您的广告审核不通过，请根据审核意见进行修改后重新提交。'}</p>
            </div>
          </div>
        </div>
      `;
    }

    function switchDetailTab(tabName) {
      currentDetailTab = tabName;
      
      // 更新标签页样式
      const tabs = ['content', 'review', 'system'];
      tabs.forEach(tab => {
        const tabBtn = document.getElementById(tab + 'Tab');
        const panel = document.getElementById(tab + 'Panel');
        
        if (tab === tabName) {
          tabBtn.classList.remove('border-transparent', 'text-gray-500');
          tabBtn.classList.add('border-blue-500', 'text-blue-600');
          panel.classList.remove('hidden');
        } else {
          tabBtn.classList.remove('border-blue-500', 'text-blue-600');
          tabBtn.classList.add('border-transparent', 'text-gray-500');
          panel.classList.add('hidden');
        }
      });
    }

    function openManualReviewFromDetail() {
      if (currentDetailAdId) {
        closeModal();
        openManualReview(currentDetailAdId);
      }
    }

    // 模态框函数
    function openModal() {
      document.getElementById('detailModal').classList.remove('hidden');
    }

    function closeModal() {
      document.getElementById('detailModal').classList.add('hidden');
      currentDetailAdId = null;
    }

    // 页面加载完成后初始化
    document.addEventListener('DOMContentLoaded', function() {
      renderAdList();
    });

    // 侧边栏切换
    function toggleSidebar() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      
      if (sidebar.classList.contains('mobile-menu-closed')) {
        sidebar.classList.remove('mobile-menu-closed');
        sidebar.classList.add('mobile-menu-open');
        overlay.classList.remove('hidden');
        overlay.classList.remove('opacity-0');
        overlay.classList.add('opacity-50');
      } else {
        sidebar.classList.remove('mobile-menu-open');
        sidebar.classList.add('mobile-menu-closed');
        overlay.classList.add('opacity-0');
        overlay.classList.remove('opacity-50');
        setTimeout(() => {
          overlay.classList.add('hidden');
        }, 300);
      }
    }

    // 点击遮罩层关闭侧边栏
    document.getElementById('sidebar-overlay').addEventListener('click', function() {
      toggleSidebar();
    });

    // 菜单项切换
    document.querySelectorAll('.sidebar-item').forEach(item => {
      item.addEventListener('click', function(e) {
        if (this.getAttribute('href') === '#') {
          e.preventDefault();
        }
        document.querySelectorAll('.sidebar-item').forEach(menu => menu.classList.remove('active'));
        this.classList.add('active');
      });
    });

    // 响应式处理
    window.addEventListener('resize', function() {
      const sidebar = document.getElementById('sidebar');
      const overlay = document.getElementById('sidebar-overlay');
      
      if (window.innerWidth >= 1024) {
        sidebar.classList.remove('mobile-menu-closed');
        sidebar.classList.add('mobile-menu-open');
        overlay.classList.add('hidden');
        overlay.classList.add('opacity-0');
        overlay.classList.remove('opacity-50');
      }
    });
  </script>
</body>
</html> 